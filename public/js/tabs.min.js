"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){console.log(t),console.log(e),"function"==typeof define&&define.amd?define([],e(t)):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t):t.tabby=e(t)}("undefined"!=typeof global?global:(void 0).window||(void 0).global,function(n){function s(t,e,o){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(o,t[n],n,t);else for(var c=0,r=t.length;c<r;c++)e.call(o,t[c],c,t)}function l(){var t={},e=!1,o=0,n=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],o++);o<n;o++){c=void 0;var c,r=arguments[o];for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e&&"[object Object]"===Object.prototype.toString.call(r[c])?t[c]=l(!0,t[c],r[c]):t[c]=r[c])}return t}function i(t,e){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),o=e.length;0<=--o&&e.item(o)!==this;);return-1<o});t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null}function u(t){"#"===t.charAt(0)&&(t=t.substr(1));for(var e,o=String(t),n=o.length,c=-1,r="",a=o.charCodeAt(0);++c<n;){if(0===(e=o.charCodeAt(c)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");1<=e&&e<=31||127==e||0===c&&48<=e&&e<=57||1===c&&48<=e&&e<=57&&45===a?r+="\\"+e.toString(16)+" ":r+=128<=e||45===e||95===e||48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122?o.charAt(c):"\\"+o.charAt(c)}return"#"+r}function a(t,e){t.hasAttribute("data-tab-no-focus")||(t.classList.contains(e.contentActiveClass)?(e={x:n.pageXOffset,y:n.pageYOffset},t.focus(),document.activeElement.id!==t.id&&(t.setAttribute("tabindex","-1"),t.setAttribute("data-tab-focused",!0),t.focus()),n.scrollTo(e.x,e.y)):t.hasAttribute("data-tab-focused")&&t.removeAttribute("tabindex"))}function d(c,r){var t=document.querySelector(u(c));t&&(t=i(t,r.selectorContentGroup))&&(t=t.querySelectorAll(r.selectorContent),s(t,function(t){if(t.id===c.substring(1))return t.classList.add(r.contentActiveClass),void a(t,r);var e,o,n;t.classList.remove(r.contentActiveClass),e=t,(o=r).stopVideo&&!e.classList.contains(o.contentActiveClass)&&(o=e.querySelector("iframe"),e=e.querySelector("video"),o&&(n=o.src,o.src=n),e&&e.pause()),a(t,r)}))}function e(t){var e,o=n.location.hash;r&&(r.id=r.getAttribute("data-tab-id"),r=null),o&&(e=document.querySelector(f.selectorToggle+'[href*="'+o+'"]'),b.toggleTab(o,e))}function o(t){var e;0!==t.button||t.metaKey||t.ctrlKey||(e=i(t.target,f.selectorToggle))&&e.hash&&(e.hash===n.location.hash?t.preventDefault():(r=document.querySelector(e.hash))&&(r.setAttribute("data-tab-id",r.id),r.id=""))}function c(t){(r=i(t.target,f.selectorContent))&&!r.classList.contains(f.contentActiveClass)&&(t=r.id,r.setAttribute("data-tab-id",t),r.setAttribute("data-tab-no-focus",!0),r.id="",location.hash=t)}var f,r,b={},m="querySelector"in document&&"addEventListener"in n&&"classList"in document.createElement("_")&&"onhashchange"in n,p={selectorToggle:"[data-tab]",selectorToggleGroup:"[data-tabs]",selectorContent:"[data-tabs-pane]",selectorContentGroup:"[data-tabs-content]",toggleActiveClass:"active",contentActiveClass:"active",initClass:"js-tabby",stopVideo:!0,callback:function(){}};b.toggleTab=function(t,e,o){var n,c,r,o=l(f||p,o||{}),a=document.querySelectorAll(u(t));d(t,o),e&&(t=i(n=e,(c=o).selectorToggleGroup))&&(t=t.querySelectorAll(c.selectorToggle),s(t,function(t){if(t.hash===n.hash)return t.classList.add(c.toggleActiveClass),void((r=i(t,"li"))&&r.classList.add(c.toggleActiveClass));t.classList.remove(c.toggleActiveClass),(r=i(t,"li"))&&r.classList.remove(c.toggleActiveClass)})),o.callback(a,e)};return b.destroy=function(){f&&(document.documentElement.classList.remove(f.initClass),document.removeEventListener("click",o,!1),document.removeEventListener("focus",c,!0),n.removeEventListener("hashchange",e,!1),r=f=null)},b.init=function(t){m&&(b.destroy(),f=l(p,t||{}),document.documentElement.classList.add(f.initClass),document.addEventListener("click",o,!1),document.addEventListener("focus",c,!0),n.addEventListener("hashchange",e,!1),e())},b});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYnMuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJjb25zb2xlIiwibG9nIiwiZGVmaW5lIiwiYW1kIiwiX3R5cGVvZiIsIm1vZHVsZSIsImV4cG9ydHMiLCJnbG9iYWwiLCJ3aW5kb3ciLCJmb3JFYWNoIiwiY29sbGVjdGlvbiIsImNhbGxiYWNrIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwicHJvcCIsImhhc093blByb3BlcnR5Iiwic2NvcGUiLCJpIiwibGVuIiwibGVuZ3RoIiwiZXh0ZW5kIiwiZXh0ZW5kZWQiLCJkZWVwIiwiYXJndW1lbnRzIiwib2JqIiwiZ2V0Q2xvc2VzdCIsImVsZW0iLCJzZWxlY3RvciIsIkVsZW1lbnQiLCJtYXRjaGVzIiwibWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsInRoaXMiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyZW50Tm9kZSIsImlkIiwiZXNjYXBlQ2hhcmFjdGVycyIsImNvZGVVbml0IiwicmVzdWx0Iiwic3RyaW5nIiwiaW5kZXgiLCJmaXJzdENvZGVVbml0IiwiY2hhckNvZGVBdCIsIkludmFsaWRDaGFyYWN0ZXJFcnJvciIsImNvbnRlbnQiLCJjaGFyQXQiLCJzcmMiLCJpZnJhbWVTcmMiLCJ2aWRlbyIsInBhdXNlIiwiYWRqdXN0Rm9jdXMiLCJ0YWIiLCJzZXR0aW5ncyIsImhhc0F0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY29udGVudEFjdGl2ZUNsYXNzIiwicG9zaXRpb24iLCJ4IiwidG9nZ2xlTGlzdCIsInkiLCJwYWdlWU9mZnNldCIsImZvY3VzIiwiYWN0aXZlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInNjcm9sbFRvIiwidG9nZ2xlVG9nZ2xlcyIsInRvZ2dsZVRhYnMiLCJ0YWJJRCIsInRhYmJ5IiwidG9nZ2xlVGFiIiwicXVlcnlTZWxlY3RvciIsInRhYkdyb3VwIiwibG9jYWxTZXR0aW5ncyIsImRlZmF1bHRzIiwidGFicyIsInRvZ2dsZSIsImFkZCIsInJlbW92ZSIsInN0b3BWaWRlbyIsInJlbW92ZUF0dHJpYnV0ZSIsImlmcmFtZSIsInBhZ2VYT2Zmc2V0IiwiaGFzaENoYW5nZUhhbmRsZXIiLCJldmVudCIsImhhc2giLCJsb2NhdGlvbiIsImdldEF0dHJpYnV0ZSIsInNlbGVjdG9yVG9nZ2xlIiwiZm9jdXNIYW5kbGVyIiwiYnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3RvckNvbnRlbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic3VwcG9ydHMiLCJjcmVhdGVFbGVtZW50Iiwic2VsZWN0b3JUb2dnbGVHcm91cCIsInNlbGVjdG9yQ29udGVudEdyb3VwIiwidG9nZ2xlQWN0aXZlQ2xhc3MiLCJpbml0Q2xhc3MiLCJvcHRpb25zIiwidG9nZ2xlR3JvdXAiLCJ0b2dnbGVzIiwiaXRlbSIsImRlc3Ryb3kiLCJjbGlja0hhbmRsZXIiLCJpbml0Il0sIm1hcHBpbmdzIjoiK1BBR0EsU0FBQUEsRUFBQUMsR0FDQUMsUUFBQUMsSUFBQUgsR0FDQUUsUUFBQUMsSUFBQUYsR0FFQyxtQkFBVUQsUUFBZUksT0FBQUMsSUFDekJILE9BQU8sR0FBUEQsRUFBQUQsSUFDQSxZQUFBLG9CQUFZQyxRQUFaLFlBQUFLLFFBQVlMLFVBSVhNLE9BQU9DLFFBQVVQLEVBQVFELEdBRXpCQSxFQUpBSSxNQUFXSCxFQUFRRCxHQVJyQixDQVVtQkMsb0JBQVhRLE9BQU5BLGFBQUEsR0FBQUMsY0FBQSxHQUFBRCxPQUFBLFNBQUFULEdBeUNVLFNBQVhXLEVBQUlBLEVBQW9CQyxFQUFZQyxHQUNuQyxHQUFJLG9CQUFKQyxPQUFJQSxVQUFPQyxT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ZnFCLEdBeERyQjRCLHdCQWpDSE0sRUFBQUQsRUFBQXpFLGlCQUFBbUIsRUFBQW9DLGdCQTJDRHZGLEVBQUEwRyxFQUFBLFNBQUFDLEdBOUJHLEdBQUtBLEVBQUt2QixPQUFTVCxFQUFPUyxLQVd6QixPQXdCRnVCLEVBQUl6RCxVQUFNcEIsSUFBU3dDLEVBQUFBLHlCQUVuQlosRUFBWXhDLEVBQWF5RixFQUFPeEQsUUFDaENPLEVBQU1hLFVBQVdLLElBQUF6QixFQUFBbUQsb0JBdEJoQkssRUErQkMxRCxVQUFBQSxPQUFrQkUsRUFBbEJtRCxvQkE5QkQ1QyxFQStCQ3hDLEVBQUF5RixFQUFBLFFBN0JBakQsRUFBV0wsVUFBVXdCLE9BQVExQixFQUFTbUQsc0JBNkR4QzlCLEVBQWN0RSxTQUFVd0UsRUFBTUMsSUErSC9CLE9BNUNBUCxFQUFNd0MsUUFBVSxXQUNUekQsSUFDTnJCLFNBQVNrRSxnQkFBZ0IzQyxVQUFVd0IsT0FBUTFCLEVBQVNvRCxXQUNwRHpFLFNBQVNnRSxvQkFBb0IsUUFBU2UsR0FBYyxHQUNwRC9FLFNBQVNnRSxvQkFBb0IsUUFBU04sR0FBYyxHQUNwRG5HLEVBQUt5RyxvQkFBb0IsYUFBY1osR0FBbUIsR0FFMURoQyxFQURBQyxFQUFXLE9BU1ppQixFQUFNMEMsS0FBTyxTQUFXTixHQUdqQk4sSUFHTjlCLEVBQU13QyxVQUdOekQsRUFBV3RDLEVBQVE0RCxFQUFVK0IsR0FBVyxJQUd4QzFFLFNBQVNrRSxnQkFBZ0IzQyxVQUFVdUIsSUFBS3pCLEVBQVNvRCxXQUdqRHpFLFNBQVNtRSxpQkFBaUIsUUFBU1ksR0FBYyxHQUNqRC9FLFNBQVNtRSxpQkFBaUIsUUFBU1QsR0FBYyxHQUNqRG5HLEVBQUs0RyxpQkFBaUIsYUFBY2YsR0FBbUIsR0FHdkRBLE1BU01kIiwiZmlsZSI6InRhYnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBUYWJieSB2MTEuMi4wOiBTaW1wbGUsIG1vYmlsZS1maXJzdCB0b2dnbGUgdGFicy5cbiAqIChjKSAyMDE2IENocmlzIEZlcmRpbmFuZGlcbiAqIE1JVCBMaWNlbnNlXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9jZmVyZGluYW5kaS90YWJieVxuICovXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuXHRjb25zb2xlLmxvZyhyb290KTtcblx0Y29uc29sZS5sb2coZmFjdG9yeSk7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuXHRcdGRlZmluZShbXSwgZmFjdG9yeShyb290KSk7XG5cdH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkocm9vdCk7XG5cdH0gZWxzZSB7XG5cdFx0cm9vdC50YWJieSA9IGZhY3Rvcnkocm9vdCk7XG5cdH1cbn0pKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdGhpcy53aW5kb3cgfHwgdGhpcy5nbG9iYWwsIChmdW5jdGlvbiAocm9vdCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvL1xuXHQvLyBWYXJpYWJsZXNcblx0Ly9cblxuXHR2YXIgdGFiYnkgPSB7fTsgLy8gT2JqZWN0IGZvciBwdWJsaWMgQVBJc1xuXHR2YXIgc3VwcG9ydHMgPSAncXVlcnlTZWxlY3RvcicgaW4gZG9jdW1lbnQgJiYgJ2FkZEV2ZW50TGlzdGVuZXInIGluIHJvb3QgJiYgJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnXycpICYmICdvbmhhc2hjaGFuZ2UnIGluIHJvb3Q7IC8vIEZlYXR1cmUgdGVzdFxuXHR2YXIgc2V0dGluZ3MsIHRhYjtcblxuXHQvLyBEZWZhdWx0IHNldHRpbmdzXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRzZWxlY3RvclRvZ2dsZTogJ1tkYXRhLXRhYl0nLFxuXHRcdHNlbGVjdG9yVG9nZ2xlR3JvdXA6ICdbZGF0YS10YWJzXScsXG5cdFx0c2VsZWN0b3JDb250ZW50OiAnW2RhdGEtdGFicy1wYW5lXScsXG5cdFx0c2VsZWN0b3JDb250ZW50R3JvdXA6ICdbZGF0YS10YWJzLWNvbnRlbnRdJyxcblx0XHR0b2dnbGVBY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0Y29udGVudEFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcblx0XHRpbml0Q2xhc3M6ICdqcy10YWJieScsXG5cdFx0c3RvcFZpZGVvOiB0cnVlLFxuXHRcdGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7fVxuXHR9O1xuXG5cblx0Ly9cblx0Ly8gTWV0aG9kc1xuXHQvL1xuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBmb3JFYWNoKCkgaW1wbGVtZW50YXRpb24gZm9yIEFycmF5cywgT2JqZWN0cyBhbmQgTm9kZUxpc3RzXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fE5vZGVMaXN0fSBjb2xsZWN0aW9uIENvbGxlY3Rpb24gb2YgaXRlbXMgdG8gaXRlcmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbiBmb3IgZWFjaCBpdGVyYXRpb25cblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R8Tm9kZUxpc3R9IHNjb3BlIE9iamVjdC9Ob2RlTGlzdC9BcnJheSB0aGF0IGZvckVhY2ggaXMgaXRlcmF0aW5nIG92ZXIgKGFrYSBgdGhpc2ApXG5cdCAqL1xuXHR2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaywgc2NvcGUpIHtcblx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGNvbGxlY3Rpb24pID09PSAnW29iamVjdCBPYmplY3RdJykge1xuXHRcdFx0Zm9yICh2YXIgcHJvcCBpbiBjb2xsZWN0aW9uKSB7XG5cdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY29sbGVjdGlvbiwgcHJvcCkpIHtcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKHNjb3BlLCBjb2xsZWN0aW9uW3Byb3BdLCBwcm9wLCBjb2xsZWN0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRjYWxsYmFjay5jYWxsKHNjb3BlLCBjb2xsZWN0aW9uW2ldLCBpLCBjb2xsZWN0aW9uKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIE1lcmdlIGRlZmF1bHRzIHdpdGggdXNlciBvcHRpb25zXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0cyBEZWZhdWx0IHNldHRpbmdzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFVzZXIgb3B0aW9uc1xuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBNZXJnZWQgdmFsdWVzIG9mIGRlZmF1bHRzIGFuZCBvcHRpb25zXG5cdCAqL1xuXHR2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0Ly8gVmFyaWFibGVzXG5cdFx0dmFyIGV4dGVuZGVkID0ge307XG5cdFx0dmFyIGRlZXAgPSBmYWxzZTtcblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cblx0XHQvLyBDaGVjayBpZiBhIGRlZXAgbWVyZ2Vcblx0XHRpZiAoIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCggYXJndW1lbnRzWzBdICkgPT09ICdbb2JqZWN0IEJvb2xlYW5dJyApIHtcblx0XHRcdGRlZXAgPSBhcmd1bWVudHNbMF07XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0Ly8gTWVyZ2UgdGhlIG9iamVjdCBpbnRvIHRoZSBleHRlbmRlZCBvYmplY3Rcblx0XHR2YXIgbWVyZ2UgPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRmb3IgKCB2YXIgcHJvcCBpbiBvYmogKSB7XG5cdFx0XHRcdGlmICggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCBvYmosIHByb3AgKSApIHtcblx0XHRcdFx0XHQvLyBJZiBkZWVwIG1lcmdlIGFuZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3QsIG1lcmdlIHByb3BlcnRpZXNcblx0XHRcdFx0XHRpZiAoIGRlZXAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9ialtwcm9wXSkgPT09ICdbb2JqZWN0IE9iamVjdF0nICkge1xuXHRcdFx0XHRcdFx0ZXh0ZW5kZWRbcHJvcF0gPSBleHRlbmQoIHRydWUsIGV4dGVuZGVkW3Byb3BdLCBvYmpbcHJvcF0gKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZXh0ZW5kZWRbcHJvcF0gPSBvYmpbcHJvcF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIExvb3AgdGhyb3VnaCBlYWNoIG9iamVjdCBhbmQgY29uZHVjdCBhIG1lcmdlXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHR2YXIgb2JqID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0bWVyZ2Uob2JqKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXh0ZW5kZWQ7XG5cblx0fTtcblxuXHQvKipcblx0ICogR2V0IHRoZSBjbG9zZXN0IG1hdGNoaW5nIGVsZW1lbnQgdXAgdGhlIERPTSB0cmVlLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0gIHtFbGVtZW50fSBlbGVtICAgICBTdGFydGluZyBlbGVtZW50XG5cdCAqIEBwYXJhbSAge1N0cmluZ30gIHNlbGVjdG9yIFNlbGVjdG9yIHRvIG1hdGNoIGFnYWluc3Rcblx0ICogQHJldHVybiB7Qm9vbGVhbnxFbGVtZW50fSAgUmV0dXJucyBudWxsIGlmIG5vdCBtYXRjaCBmb3VuZFxuXHQgKi9cblx0dmFyIGdldENsb3Nlc3QgPSBmdW5jdGlvbiAoIGVsZW0sIHNlbGVjdG9yICkge1xuXG5cdFx0Ly8gRWxlbWVudC5tYXRjaGVzKCkgcG9seWZpbGxcblx0XHRpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcblx0XHRcdEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPVxuXHRcdFx0XHRFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0RWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRcdEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRcdEVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFx0RWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRcdGZ1bmN0aW9uKHMpIHtcblx0XHRcdFx0XHR2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcblx0XHRcdFx0XHRcdGkgPSBtYXRjaGVzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2hlcy5pdGVtKGkpICE9PSB0aGlzKSB7fVxuXHRcdFx0XHRcdHJldHVybiBpID4gLTE7XG5cdFx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGNsb3Nlc3QgbWF0Y2hcblx0XHRmb3IgKCA7IGVsZW0gJiYgZWxlbSAhPT0gZG9jdW1lbnQ7IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubWF0Y2hlcyggc2VsZWN0b3IgKSApIHJldHVybiBlbGVtO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIEVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgZm9yIHVzZSB3aXRoIHF1ZXJ5U2VsZWN0b3Jcblx0ICogQHB1YmxpY1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGFuY2hvciBJRCB0byBlc2NhcGVcblx0ICogQGF1dGhvciBNYXRoaWFzIEJ5bmVuc1xuXHQgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9DU1MuZXNjYXBlXG5cdCAqL1xuXHR2YXIgZXNjYXBlQ2hhcmFjdGVycyA9IGZ1bmN0aW9uICggaWQgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBsZWFkaW5nIGhhc2hcblx0XHRcdGlmICggaWQuY2hhckF0KDApID09PSAnIycgKSB7XG5cdFx0XHRcdGlkID0gaWQuc3Vic3RyKDEpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgc3RyaW5nID0gU3RyaW5nKGlkKTtcblx0XHRcdHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXHRcdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0XHR2YXIgY29kZVVuaXQ7XG5cdFx0XHR2YXIgcmVzdWx0ID0gJyc7XG5cdFx0XHR2YXIgZmlyc3RDb2RlVW5pdCA9IHN0cmluZy5jaGFyQ29kZUF0KDApO1xuXHRcdFx0d2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0Y29kZVVuaXQgPSBzdHJpbmcuY2hhckNvZGVBdChpbmRleCk7XG5cdFx0XHRcdC8vIE5vdGU6IHRoZXJl4oCZcyBubyBuZWVkIHRvIHNwZWNpYWwtY2FzZSBhc3RyYWwgc3ltYm9scywgc3Vycm9nYXRlXG5cdFx0XHRcdC8vIHBhaXJzLCBvciBsb25lIHN1cnJvZ2F0ZXMuXG5cblx0XHRcdFx0Ly8gSWYgdGhlIGNoYXJhY3RlciBpcyBOVUxMIChVKzAwMDApLCB0aGVuIHRocm93IGFuXG5cdFx0XHRcdC8vIGBJbnZhbGlkQ2hhcmFjdGVyRXJyb3JgIGV4Y2VwdGlvbiBhbmQgdGVybWluYXRlIHRoZXNlIHN0ZXBzLlxuXHRcdFx0XHRpZiAoY29kZVVuaXQgPT09IDB4MDAwMCkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBJbnZhbGlkQ2hhcmFjdGVyRXJyb3IoXG5cdFx0XHRcdFx0XHQnSW52YWxpZCBjaGFyYWN0ZXI6IHRoZSBpbnB1dCBjb250YWlucyBVKzAwMDAuJ1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIGNoYXJhY3RlciBpcyBpbiB0aGUgcmFuZ2UgW1xcMS1cXDFGXSAoVSswMDAxIHRvIFUrMDAxRikgb3IgaXNcblx0XHRcdFx0XHQvLyBVKzAwN0YsIFvigKZdXG5cdFx0XHRcdFx0KGNvZGVVbml0ID49IDB4MDAwMSAmJiBjb2RlVW5pdCA8PSAweDAwMUYpIHx8IGNvZGVVbml0ID09IDB4MDA3RiB8fFxuXHRcdFx0XHRcdC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgdGhlIGZpcnN0IGNoYXJhY3RlciBhbmQgaXMgaW4gdGhlIHJhbmdlIFswLTldXG5cdFx0XHRcdFx0Ly8gKFUrMDAzMCB0byBVKzAwMzkpLCBb4oCmXVxuXHRcdFx0XHRcdChpbmRleCA9PT0gMCAmJiBjb2RlVW5pdCA+PSAweDAwMzAgJiYgY29kZVVuaXQgPD0gMHgwMDM5KSB8fFxuXHRcdFx0XHRcdC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgdGhlIHNlY29uZCBjaGFyYWN0ZXIgYW5kIGlzIGluIHRoZSByYW5nZSBbMC05XVxuXHRcdFx0XHRcdC8vIChVKzAwMzAgdG8gVSswMDM5KSBhbmQgdGhlIGZpcnN0IGNoYXJhY3RlciBpcyBhIGAtYCAoVSswMDJEKSwgW+KApl1cblx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRpbmRleCA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0Y29kZVVuaXQgPj0gMHgwMDMwICYmIGNvZGVVbml0IDw9IDB4MDAzOSAmJlxuXHRcdFx0XHRcdFx0Zmlyc3RDb2RlVW5pdCA9PT0gMHgwMDJEXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHQvLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3NvbS8jZXNjYXBlLWEtY2hhcmFjdGVyLWFzLWNvZGUtcG9pbnRcblx0XHRcdFx0XHRyZXN1bHQgKz0gJ1xcXFwnICsgY29kZVVuaXQudG9TdHJpbmcoMTYpICsgJyAnO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGNoYXJhY3RlciBpcyBub3QgaGFuZGxlZCBieSBvbmUgb2YgdGhlIGFib3ZlIHJ1bGVzIGFuZCBpc1xuXHRcdFx0XHQvLyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gVSswMDgwLCBpcyBgLWAgKFUrMDAyRCkgb3IgYF9gIChVKzAwNUYpLCBvclxuXHRcdFx0XHQvLyBpcyBpbiBvbmUgb2YgdGhlIHJhbmdlcyBbMC05XSAoVSswMDMwIHRvIFUrMDAzOSksIFtBLVpdIChVKzAwNDEgdG9cblx0XHRcdFx0Ly8gVSswMDVBKSwgb3IgW2Etel0gKFUrMDA2MSB0byBVKzAwN0EpLCBb4oCmXVxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0Y29kZVVuaXQgPj0gMHgwMDgwIHx8XG5cdFx0XHRcdFx0Y29kZVVuaXQgPT09IDB4MDAyRCB8fFxuXHRcdFx0XHRcdGNvZGVVbml0ID09PSAweDAwNUYgfHxcblx0XHRcdFx0XHRjb2RlVW5pdCA+PSAweDAwMzAgJiYgY29kZVVuaXQgPD0gMHgwMDM5IHx8XG5cdFx0XHRcdFx0Y29kZVVuaXQgPj0gMHgwMDQxICYmIGNvZGVVbml0IDw9IDB4MDA1QSB8fFxuXHRcdFx0XHRcdGNvZGVVbml0ID49IDB4MDA2MSAmJiBjb2RlVW5pdCA8PSAweDAwN0Fcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Ly8gdGhlIGNoYXJhY3RlciBpdHNlbGZcblx0XHRcdFx0XHRyZXN1bHQgKz0gc3RyaW5nLmNoYXJBdChpbmRleCk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cblx0XHRcdFx0Ly8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3Nzb20vI2VzY2FwZS1hLWNoYXJhY3RlclxuXHRcdFx0XHRyZXN1bHQgKz0gJ1xcXFwnICsgc3RyaW5nLmNoYXJBdChpbmRleCk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuICcjJyArIHJlc3VsdDtcblxuXHRcdH07XG5cblx0LyoqXG5cdCAqIFN0b3AgWW91VHViZSwgVmltZW8sIGFuZCBIVE1MNSB2aWRlb3MgZnJvbSBwbGF5aW5nIHdoZW4gbGVhdmluZyB0aGUgc2xpZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtICB7RWxlbWVudH0gY29udGVudCBUaGUgY29udGVudCBjb250YWluZXIgdGhlIHZpZGVvIGlzIGluXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gYWN0aXZlQ2xhc3MgVGhlIGNsYXNzIGFzaWduZWQgdG8gZXhwYW5kZWQgY29udGVudCBhcmVhc1xuXHQgKi9cblx0dmFyIHN0b3BWaWRlb3MgPSBmdW5jdGlvbiAoIGNvbnRlbnQsIHNldHRpbmdzICkge1xuXG5cdFx0Ly8gQ2hlY2sgaWYgc3RvcCB2aWRlbyBlbmFibGVkXG5cdFx0aWYgKCAhc2V0dGluZ3Muc3RvcFZpZGVvICkgcmV0dXJuO1xuXG5cdFx0Ly8gT25seSBydW4gaWYgY29udGVudCBjb250YWluZXIgaXMgY2xvc2VkXG5cdFx0aWYgKCBjb250ZW50LmNsYXNzTGlzdC5jb250YWlucyggc2V0dGluZ3MuY29udGVudEFjdGl2ZUNsYXNzICkgKSByZXR1cm47XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgdmlkZW8gaXMgYW4gaWZyYW1lIG9yIEhUTUw1IHZpZGVvXG5cdFx0dmFyIGlmcmFtZSA9IGNvbnRlbnQucXVlcnlTZWxlY3RvciggJ2lmcmFtZScpO1xuXHRcdHZhciB2aWRlbyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvciggJ3ZpZGVvJyApO1xuXG5cdFx0Ly8gU3RvcCB0aGUgdmlkZW9cblx0XHRpZiAoIGlmcmFtZSApIHtcblx0XHRcdHZhciBpZnJhbWVTcmMgPSBpZnJhbWUuc3JjO1xuXHRcdFx0aWZyYW1lLnNyYyA9IGlmcmFtZVNyYztcblx0XHR9XG5cdFx0aWYgKCB2aWRlbyApIHtcblx0XHRcdHZpZGVvLnBhdXNlKCk7XG5cdFx0fVxuXG5cdH07XG5cblx0LyoqXG5cdCAqIEFkZCBmb2N1cyB0byB0YWJcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtICB7bm9kZX0gICB0YWIgICAgICBUaGUgY29udGVudCB0byBicmluZyBpbnRvIGZvY3VzXG5cdCAqIEBwYXJhbSAge29iamVjdH0gc2V0dGluZ3MgT3B0aW9uc1xuXHQgKi9cblx0dmFyIGFkanVzdEZvY3VzID0gZnVuY3Rpb24gKCB0YWIsIHNldHRpbmdzICkge1xuXG5cdFx0aWYgKCB0YWIuaGFzQXR0cmlidXRlKCAnZGF0YS10YWItbm8tZm9jdXMnICkgKSByZXR1cm47XG5cblx0XHQvLyBJZiB0YWIgaXMgY2xvc2VkLCByZW1vdmUgdGFiaW5kZXhcblx0XHRpZiAoICF0YWIuY2xhc3NMaXN0LmNvbnRhaW5zKCBzZXR0aW5ncy5jb250ZW50QWN0aXZlQ2xhc3MgKSApIHtcblx0XHRcdGlmICggdGFiLmhhc0F0dHJpYnV0ZSggJ2RhdGEtdGFiLWZvY3VzZWQnICkgKSB7XG5cdFx0XHRcdHRhYi5yZW1vdmVBdHRyaWJ1dGUoICd0YWJpbmRleCcgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgY3VycmVudCBwb3NpdGlvbiBvbiB0aGUgcGFnZVxuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHg6IHJvb3QucGFnZVhPZmZzZXQsXG5cdFx0XHR5OiByb290LnBhZ2VZT2Zmc2V0XG5cdFx0fTtcblxuXHRcdC8vIFNldCBmb2N1cyBhbmQgcmVzZXQgcG9zaXRpb24gdG8gYWNjb3VudCBmb3IgcGFnZSBqdW1wIG9uIGZvY3VzXG5cdFx0dGFiLmZvY3VzKCk7XG5cdFx0aWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkICE9PSB0YWIuaWQgKSB7XG5cdFx0XHR0YWIuc2V0QXR0cmlidXRlKCAndGFiaW5kZXgnLCAnLTEnICk7XG5cdFx0XHR0YWIuc2V0QXR0cmlidXRlKCAnZGF0YS10YWItZm9jdXNlZCcsIHRydWUgKTtcblx0XHRcdHRhYi5mb2N1cygpO1xuXHRcdH1cblx0XHRyb290LnNjcm9sbFRvKCBwb3NpdGlvbi54LCBwb3NpdGlvbi55ICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogVG9nZ2xlIHRhYiB0b2dnbGUgYWN0aXZlIHN0YXRlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSAge05vZGV9ICAgdG9nZ2xlICAgVGhlIHRvZ2dsZSBlbGVtZW50XG5cdCAqIEBwYXJhbSAge09iamVjdH0gc2V0dGluZ3Ncblx0ICovXG5cdHZhciB0b2dnbGVUb2dnbGVzID0gZnVuY3Rpb24gKCB0b2dnbGUsIHNldHRpbmdzICkge1xuXG5cdFx0Ly8gVmFyaWFibGVzXG5cdFx0dmFyIHRvZ2dsZUdyb3VwID0gZ2V0Q2xvc2VzdCggdG9nZ2xlLCBzZXR0aW5ncy5zZWxlY3RvclRvZ2dsZUdyb3VwICk7IC8vIFRoZSBwYXJlbnQgZm9yIHRoZSB0b2dnbGUgZ3JvdXBcblx0XHRpZiAoICF0b2dnbGVHcm91cCApIHJldHVybjtcblx0XHR2YXIgdG9nZ2xlcyA9IHRvZ2dsZUdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoIHNldHRpbmdzLnNlbGVjdG9yVG9nZ2xlICk7IC8vIFRoZSB0b2dnbGVzIGluIHRoZSBncm91cFxuXHRcdHZhciB0b2dnbGVMaXN0O1xuXG5cdFx0Ly8gU2hvdyBvciBoaWRlIGVhY2ggdG9nZ2xlXG5cdFx0Ly8gQHRvZG8gU3RhcnQgaGVyZVxuXHRcdGZvckVhY2godG9nZ2xlcywgKGZ1bmN0aW9uIChpdGVtKSB7XG5cblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIHNlbGVjdGVkIHRvZ2dsZSwgYWN0aXZhdGUgaXRcblx0XHRcdGlmICggaXRlbS5oYXNoID09PSB0b2dnbGUuaGFzaCApIHtcblxuXHRcdFx0XHQvLyBBZGQgYWN0aXZlIGNsYXNzXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZCggc2V0dGluZ3MudG9nZ2xlQWN0aXZlQ2xhc3MgKTtcblxuXHRcdFx0XHQvLyBJZiB0b2dnbGUgaXMgYSBsaXN0IGl0ZW0sIGFjdGl2YXRlIDxsaT4gZWxlbWVudCwgdG9vXG5cdFx0XHRcdHRvZ2dsZUxpc3QgPSBnZXRDbG9zZXN0KCBpdGVtLCAnbGknICk7XG5cdFx0XHRcdGlmICggdG9nZ2xlTGlzdCApIHtcblx0XHRcdFx0XHR0b2dnbGVMaXN0LmNsYXNzTGlzdC5hZGQoIHNldHRpbmdzLnRvZ2dsZUFjdGl2ZUNsYXNzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBkZWFjdGl2YXRlIGl0XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoIHNldHRpbmdzLnRvZ2dsZUFjdGl2ZUNsYXNzICk7XG5cdFx0XHR0b2dnbGVMaXN0ID0gZ2V0Q2xvc2VzdCggaXRlbSwgJ2xpJyApO1xuXHRcdFx0aWYgKCB0b2dnbGVMaXN0ICkge1xuXHRcdFx0XHR0b2dnbGVMaXN0LmNsYXNzTGlzdC5yZW1vdmUoIHNldHRpbmdzLnRvZ2dsZUFjdGl2ZUNsYXNzICk7XG5cdFx0XHR9XG5cblx0XHR9KSk7XG5cblx0fTtcblxuXHQvKipcblx0ICogVG9nZ2xlIHRhYiBhY3RpdmUgc3RhdGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtICB7U3RyaW5nfSB0YWJJRCAgICBUaGUgSUQgb2YgdGhlIHRhYiB0byBhY3RpdmF0ZVxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IHNldHRpbmdzXG5cdCAqL1xuXHR2YXIgdG9nZ2xlVGFicyA9IGZ1bmN0aW9uICggdGFiSUQsIHNldHRpbmdzICkge1xuXG5cdFx0Ly8gVmFyaWFibGVzXG5cdFx0dmFyIHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIGVzY2FwZUNoYXJhY3RlcnMoIHRhYklEICkgKTsgLy8gVGhlIHNlbGVjdGVkIHRhYlxuXHRcdGlmICggIXRhYiApIHJldHVybjtcblx0XHR2YXIgdGFiR3JvdXAgPSBnZXRDbG9zZXN0KCB0YWIsIHNldHRpbmdzLnNlbGVjdG9yQ29udGVudEdyb3VwICk7IC8vIFRoZSBwYXJlbnQgZm9yIHRoZSB0YWIgZ3JvdXBcblx0XHRpZiAoICF0YWJHcm91cCApIHJldHVybjtcblx0XHR2YXIgdGFicyA9IHRhYkdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoIHNldHRpbmdzLnNlbGVjdG9yQ29udGVudCApOyAvLyBUaGUgdGFicyBpbiB0aGUgZ3JvdXBcblxuXHRcdC8vIFNob3cgb3IgaGlkZSBlYWNoIHRhYlxuXHRcdGZvckVhY2godGFicywgKGZ1bmN0aW9uICh0YWIpIHtcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgc2VsZWN0ZWQgdGFiLCBzaG93IGl0XG5cdFx0XHRpZiAoIHRhYi5pZCA9PT0gdGFiSUQuc3Vic3RyaW5nKDEpICkge1xuXHRcdFx0XHR0YWIuY2xhc3NMaXN0LmFkZCggc2V0dGluZ3MuY29udGVudEFjdGl2ZUNsYXNzICk7XG5cdFx0XHRcdGFkanVzdEZvY3VzKCB0YWIsIHNldHRpbmdzICk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBoaWRlIGl0XG5cdFx0XHR0YWIuY2xhc3NMaXN0LnJlbW92ZSggc2V0dGluZ3MuY29udGVudEFjdGl2ZUNsYXNzICk7XG5cdFx0XHRzdG9wVmlkZW9zKCB0YWIsIHNldHRpbmdzICk7XG5cdFx0XHRhZGp1c3RGb2N1cyggdGFiLCBzZXR0aW5ncyApO1xuXG5cdFx0fSkpO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFNob3cgYSB0YWIgYW5kIGhpZGUgYWxsIG90aGVyc1xuXHQgKiBAcHVibGljXG5cdCAqIEBwYXJhbSAge0VsZW1lbnR9IHRvZ2dsZSBUaGUgZWxlbWVudCB0aGF0IHRvZ2dsZWQgdGhlIHNob3cgdGFiIGV2ZW50XG5cdCAqIEBwYXJhbSAge1N0cmluZ30gIHRhYklEIFRoZSBJRCBvZiB0aGUgdGFiIHRvIHNob3dcblx0ICogQHBhcmFtICB7T2JqZWN0fSAgb3B0aW9uc1xuXHQgKi9cblx0dGFiYnkudG9nZ2xlVGFiID0gZnVuY3Rpb24gKCB0YWJJRCwgdG9nZ2xlLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gU2VsZWN0b3JzIGFuZCB2YXJpYWJsZXNcblx0XHR2YXIgbG9jYWxTZXR0aW5ncyA9IGV4dGVuZCggc2V0dGluZ3MgfHwgZGVmYXVsdHMsIG9wdGlvbnMgfHwge30gKTsgIC8vIE1lcmdlIHVzZXIgb3B0aW9ucyB3aXRoIGRlZmF1bHRzXG5cdFx0dmFyIHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBlc2NhcGVDaGFyYWN0ZXJzKCB0YWJJRCApICk7IC8vIEdldCB0YWIgY29udGVudFxuXG5cdFx0Ly8gVG9nZ2xlIHZpc2liaWxpdHkgb2YgdGhlIHRvZ2dsZXMgYW5kIHRhYnNcblx0XHR0b2dnbGVUYWJzKCB0YWJJRCwgbG9jYWxTZXR0aW5ncyApO1xuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0dG9nZ2xlVG9nZ2xlcyh0b2dnbGUsIGxvY2FsU2V0dGluZ3MpO1xuXHRcdH1cblxuXHRcdC8vIFJ1biBjYWxsYmFja3MgYWZ0ZXIgdG9nZ2xpbmcgdGFiXG5cdFx0bG9jYWxTZXR0aW5ncy5jYWxsYmFjayggdGFicywgdG9nZ2xlICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogSGFuZGxlIGhhcyBjaGFuZ2UgZXZlbnRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHZhciBoYXNoQ2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuXG5cdFx0Ly8gR2V0IGhhc2ggZnJvbSBVUkxcblx0XHR2YXIgaGFzaCA9IHJvb3QubG9jYXRpb24uaGFzaDtcblxuXHRcdC8vIElmIGNsaWNrZWQgdGFiIGlzIGNhY2hlZCwgcmVzZXQgaXQncyBJRFxuXHRcdGlmICggdGFiICkge1xuXHRcdFx0dGFiLmlkID0gdGFiLmdldEF0dHJpYnV0ZSggJ2RhdGEtdGFiLWlkJyApO1xuXHRcdFx0dGFiID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSdzIGEgVVJMIGhhc2gsIGFjdGl2YXRlIHRhYiB3aXRoIG1hdGNoaW5nIElEXG5cdFx0aWYgKCAhaGFzaCApIHJldHVybjtcblx0XHR2YXIgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2V0dGluZ3Muc2VsZWN0b3JUb2dnbGUgKyAnW2hyZWYqPVwiJyArIGhhc2ggKyAnXCJdJyApO1xuXHRcdHRhYmJ5LnRvZ2dsZVRhYiggaGFzaCwgdG9nZ2xlICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogSGFuZGxlIHRvZ2dsZSBjbGljayBldmVudHNcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuXHRcdC8vIERvbid0IHJ1biBpZiByaWdodC1jbGljayBvciBjb21tYW5kL2NvbnRyb2wgKyBjbGlja1xuXHRcdGlmICggZXZlbnQuYnV0dG9uICE9PSAwIHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSApIHJldHVybjtcblxuXHRcdC8vIENoZWNrIGlmIGV2ZW50IHRhcmdldCBpcyBhIHRhYiB0b2dnbGVcblx0XHR2YXIgdG9nZ2xlID0gZ2V0Q2xvc2VzdCggZXZlbnQudGFyZ2V0LCBzZXR0aW5ncy5zZWxlY3RvclRvZ2dsZSApO1xuXHRcdGlmICggIXRvZ2dsZSB8fCAhdG9nZ2xlLmhhc2ggKSByZXR1cm47XG5cblx0XHQvLyBEb24ndCBydW4gaWYgdG9nZ2xlIHBvaW50cyB0byBjdXJyZW50bHkgb3BlbiB0YWJcblx0XHRpZiAoIHRvZ2dsZS5oYXNoID09PSByb290LmxvY2F0aW9uLmhhc2ggKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdldCB0aGUgdGFiIGNvbnRlbnRcblx0XHR0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCB0b2dnbGUuaGFzaCApO1xuXG5cdFx0Ly8gSWYgdGFiIGNvbnRlbnQgZXhpc3RzLCBzYXZlIHRoZSBJRCBhcyBhIGRhdGEgYXR0cmlidXRlIGFuZCByZW1vdmUgaXQgKHByZXZlbnRzIHNjcm9sbCBqdW1wKVxuXHRcdGlmICggIXRhYiApIHJldHVybjtcblx0XHR0YWIuc2V0QXR0cmlidXRlKCAnZGF0YS10YWItaWQnLCB0YWIuaWQgKTtcblx0XHR0YWIuaWQgPSAnJztcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBIYW5kbGUgY29udGVudCBmb2N1cyBldmVudHNcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHZhciBmb2N1c0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuXHRcdC8vIE9ubHkgcnVuIGlmIHRoZSBmb2N1c2VkIGNvbnRlbnQgaXMgaW4gYSB0YWJcblx0XHR0YWIgPSBnZXRDbG9zZXN0KCBldmVudC50YXJnZXQsIHNldHRpbmdzLnNlbGVjdG9yQ29udGVudCApO1xuXHRcdGlmICggIXRhYiApIHJldHVybjtcblxuXHRcdC8vIERvbid0IHJ1biBpZiB0aGUgY29udGVudCBhcmVhIGlzIGFscmVhZHkgb3BlblxuXHRcdGlmICggdGFiLmNsYXNzTGlzdC5jb250YWlucyggc2V0dGluZ3MuY29udGVudEFjdGl2ZUNsYXNzICkgKSByZXR1cm47XG5cblx0XHQvLyBTdG9yZSB0YWIgSUQgdG8gdmFyaWFibGUgYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSB0YWJcblx0XHR2YXIgaGFzaCA9IHRhYi5pZDtcblx0XHR0YWIuc2V0QXR0cmlidXRlKCAnZGF0YS10YWItaWQnLCBoYXNoICk7XG5cdFx0dGFiLnNldEF0dHJpYnV0ZSggJ2RhdGEtdGFiLW5vLWZvY3VzJywgdHJ1ZSApO1xuXHRcdHRhYi5pZCA9ICcnO1xuXG5cdFx0Ly8gQ2hhbmdlIHRoZSBoYXNoXG5cdFx0bG9jYXRpb24uaGFzaCA9IGhhc2g7XG5cblx0fTtcblxuXHQvKipcblx0ICogRGVzdHJveSB0aGUgY3VycmVudCBpbml0aWFsaXphdGlvbi5cblx0ICogQHB1YmxpY1xuXHQgKi9cblx0dGFiYnkuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoICFzZXR0aW5ncyApIHJldHVybjtcblx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggc2V0dGluZ3MuaW5pdENsYXNzICk7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIsIGZhbHNlKTtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIGZvY3VzSGFuZGxlciwgdHJ1ZSk7XG5cdFx0cm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgaGFzaENoYW5nZUhhbmRsZXIsIGZhbHNlKTtcblx0XHRzZXR0aW5ncyA9IG51bGw7XG5cdFx0dGFiID0gbnVsbDtcblx0fTtcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSBUYWJieVxuXHQgKiBAcHVibGljXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFVzZXIgc2V0dGluZ3Ncblx0ICovXG5cdHRhYmJ5LmluaXQgPSBmdW5jdGlvbiAoIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBmZWF0dXJlIHRlc3Rcblx0XHRpZiAoICFzdXBwb3J0cyApIHJldHVybjtcblxuXHRcdC8vIERlc3Ryb3kgYW55IGV4aXN0aW5nIGluaXRpYWxpemF0aW9uc1xuXHRcdHRhYmJ5LmRlc3Ryb3koKTtcblxuXHRcdC8vIE1lcmdlIHVzZXIgb3B0aW9ucyB3aXRoIGRlZmF1bHRzXG5cdFx0c2V0dGluZ3MgPSBleHRlbmQoIGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9ICk7XG5cblx0XHQvLyBBZGQgY2xhc3MgdG8gSFRNTCBlbGVtZW50IHRvIGFjdGl2YXRlIGNvbmRpdGlvbmFsIENTU1xuXHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCBzZXR0aW5ncy5pbml0Q2xhc3MgKTtcblxuXHRcdC8vIExpc3RlbiBmb3IgYWxsIGNsaWNrIGV2ZW50c1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyLCBmYWxzZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmb2N1c0hhbmRsZXIsIHRydWUpO1xuXHRcdHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhhc2hDaGFuZ2VIYW5kbGVyLCBmYWxzZSk7XG5cblx0XHQvLyBJZiBVUkwgaGFzIGEgaGFzaCwgYWN0aXZhdGUgaGFzaGVkIHRhYiBieSBkZWZhdWx0XG5cdFx0aGFzaENoYW5nZUhhbmRsZXIoKTtcblxuXHR9O1xuXG5cblx0Ly9cblx0Ly8gUHVibGljIEFQSXNcblx0Ly9cblxuXHRyZXR1cm4gdGFiYnk7XG5cbn0pKTsiXX0=