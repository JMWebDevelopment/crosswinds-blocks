"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement));return null}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(e):e.Tabby=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(a){var u={idPrefix:"tabby-toggle_",default:"[data-tabby-default]"},o=function(e,t){var r;"function"==typeof a.CustomEvent?r=new CustomEvent("tabby",{bubbles:!0,cancelable:!0,detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent("tabby",!0,!0,t),e.dispatchEvent(r)},n=function(e){e=e.closest('[role="tablist"]');if(!e)return{};e=e.querySelector('[role="tab"][aria-selected="true"]');if(!e)return{};var t=document.querySelector(e.hash);return e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1"),t?(t.setAttribute("hidden","hidden"),{previousTab:e,previousContent:t}):{previousTab:e}},i=function(e,t){e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),t.removeAttribute("hidden"),e.focus()},c=function(e){var t,r;!e||"true"==e.getAttribute("aria-selected")||(t=document.querySelector(e.hash))&&(r=n(e),i(e,t),r.tab=e,r.content=t,o(e,r))},s=function(e){var t=e.closest('[role="tablist"]'),t=t?t.querySelectorAll('[role="tab"]'):null;if(t)return{tabs:t,index:Array.prototype.indexOf.call(t,e)}};return function(n,e){var o,t,r={},i=(r.destroy=function(){var e=t.querySelectorAll("a");Array.prototype.forEach.call(e,function(e){var t,r=document.querySelector(e.hash);r&&(r=r,t=o,(e=e).id.slice(0,t.idPrefix.length)===t.idPrefix&&(e.id=""),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex"),e.closest("li").removeAttribute("role"),r.removeAttribute("role"),r.removeAttribute("aria-labelledby"),r.removeAttribute("hidden"))}),t.removeAttribute("role"),document.documentElement.removeEventListener("click",i,!0),t.removeEventListener("keydown",l,!0),t=o=null},r.setup=function(){var e;(t=document.querySelector(n))&&(e=t.querySelectorAll("a"),t.setAttribute("role","tablist"),Array.prototype.forEach.call(e,function(e){var t,r=document.querySelector(e.hash);r&&(r=r,t=o,(e=e).id||(e.id=t.idPrefix+r.id),e.setAttribute("role","tab"),e.setAttribute("aria-controls",r.id),e.closest("li").setAttribute("role","presentation"),r.setAttribute("role","tabpanel"),r.setAttribute("aria-labelledby",e.id),e.matches(t.default)?e.setAttribute("aria-selected","true"):(e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1"),r.setAttribute("hidden","hidden")))}))},r.toggle=function(e){var t=e;"string"==typeof e&&(t=document.querySelector(n+' [role="tab"][href*="'+e+'"]')),c(t)},function(e){var t=e.target.closest(n+' [role="tab"]');t&&(e.preventDefault(),c(t))}),l=function(e){var t,r,o=document.activeElement;!o.matches(n+' [role="tab"]')||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","Home","End"].indexOf(e.key)<0||(o=o,e=e.key,(o=s(o))&&(t=o.tabs.length-1,-1<["ArrowUp","ArrowLeft","Up","Left"].indexOf(e)?r=o.index<1?t:o.index-1:-1<["ArrowDown","ArrowRight","Down","Right"].indexOf(e)?r=o.index===t?0:o.index+1:"Home"===e?r=0:"End"===e&&(r=t),c(o.tabs[r])))};return o=function(){var r={};return Array.prototype.forEach.call(arguments,function(e){for(var t in e){if(!e.hasOwnProperty(t))return;r[t]=e[t]}}),r}(u,e||{}),r.setup(),e=n,a.location.hash.length<1||(e=document.querySelector(e+' [role="tab"][href*="'+a.location.hash+'"]'),c(e)),document.documentElement.addEventListener("click",i,!0),t.addEventListener("keydown",l,!0),r}}),Array.from(document.querySelectorAll(".wp-block-crosswinds-blocks-tabs")).forEach(function(e){console.log(e.id);new Tabby("#"+e.id)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYnMuanMiXSwibmFtZXMiOlsiRWxlbWVudCIsInByb3RvdHlwZSIsIm1hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsImNsb3Nlc3QiLCJzIiwiY29udGFpbnMiLCJ0aGlzIiwiYW5jZXN0b3IiLCJwYXJlbnRFbGVtZW50IiwiZWwiLCJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJfdHlwZW9mIiwibW9kdWxlIiwiVGFiYnkiLCJnbG9iYWwiLCJ3aW5kb3ciLCJpZFByZWZpeCIsImRlZmF1bHQiLCJlbWl0RXZlbnQiLCJ0YWIiLCJkZXRhaWxzIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiZGV0YWlsIiwiZG9jdW1lbnQiLCJkaXNwYXRjaEV2ZW50IiwiaGlkZSIsIm5ld1RhYiIsInRhYkdyb3VwIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoYXNoIiwic2V0QXR0cmlidXRlIiwicHJldmlvdXNUYWIiLCJwcmV2aW91c0NvbnRlbnQiLCJzaG93IiwidG9nZ2xlIiwiZ2V0QXR0cmlidXRlIiwiZ2V0VGFic01hcCIsInRhYnMiLCJpbmRleCIsIkFycmF5IiwiaW5kZXhPZiIsImNhbGwiLCJ0YWJXcmFwcGVyIiwicXVlcnlTZWxlY3RvckFsbCIsInNldHRpbmdzIiwiZGVzdHJveVRhYiIsInB1YmxpY0FQSXMiLCJkZXN0cm95IiwiZm9yRWFjaCIsInNldHVwIiwiaWQiLCJzbGljZSIsImxlbmd0aCIsInJlbW92ZUF0dHJpYnV0ZSIsImRvY3VtZW50RWxlbWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGlja0hhbmRsZXIiLCJzZXR1cFRhYiIsImtleUhhbmRsZXIiLCJzZWxlY3RvciIsImV4dGVuZCIsImRlZmF1bHRzIiwidGFyZ2V0IiwibG9hZEZyb21VUkwiLCJDb25zdHJ1Y3RvciIsImFjdGl2ZUVsZW1lbnQiLCJjb25zb2xlIiwia2V5IiwibWFwIiwibWVyZ2VkIiwiYXJndW1lbnRzIiwib2JqIiwiaGFzT3duUHJvcGVydHkiLCJvcHRpb25zIiwibG9jYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiZnJvbSIsImxvZyJdLCJtYXBwaW5ncyI6IjhQQVFBQSxRQUFBQyxVQUFBQyxVQUNBRixRQUFBQyxVQUFBQyxRQUFBRixRQUFBQyxVQUFBRSxtQkFBQUgsUUFBQUMsVUFBQUcsdUJBTUFKLFFBQUFDLFVBQUFJLFVBQ0FMLFFBQUFDLFVBQUFDLFVBQ0FGLFFBQUFDLFVBQUFDLFFBQUFGLFFBQUFDLFVBQUFFLG1CQUFBSCxRQUFBQyxVQUFBRyx1QkFNQ0osUUFBUUMsVUFBVUksUUFBVSxTQUFVQyxHQUNyQyxJQUxHTixFQUFRQyxLQUNaLElBQUtELFNBQVFDLGdCQUFiTSxTQUlVQyxNQUpzQixPQUFBLEtBTy9CLEdBTEEsR0FBQUMsRUFBQVAsUUFBQUksR0FBQSxPQUFBRyxRQUNpQkosUUFNaEJJLEVBQVdBLEVBQVNDLGdCQUVyQixPQVBJQyxPQVVOLFNBQVdDLEVBQU1DLEdBUFosbUJBQUFDLFFBQUFBLE9BQUFDLElBU0hELE9BUkMsR0FBSUwsV0FTSixPQVJBQSxFQUFXQSxLQVVrQixZQUFuQixvQkFBT08sUUFBUCxZQUFBQyxRQUFPRCxVQUNsQkUsT0FUQUYsUUFBQUgsRUFBQUQsR0FFREEsRUFBQU8sTUFBQU4sRUFBQUQsR0FDRCxDQUFpQkMsb0JBQWhCTyxPQUF5QkEsT0FBQSxvQkFBQUMsT0FBQUEsWUFBQSxFQUFBLFNBQUFBLEdBa0J6QixJQVZDVCxFQUFBLENBQ0FVLFNBQUEsZ0JBVEZDLFFBVVVILHdCQW9DVkksRUFBQSxTQUFBQyxFQUFBQyxHQUdBLElBQUFDLEVBS29DLG1CQUF2Qk4sRUFBT08sWUFDakJELEVBQVEsSUFBSUMsWUFBWSxRQUFTLENBTG5DQyxTQUFJTCxFQUVITSxZQUFBLEVBQ0FDLE9BQUlKLEtBUUhBLEVBTktLLFNBQU9KLFlBQVksZ0JBQ3ZCQyxnQkFEZ0MsU0FBQSxHQUFBLEVBQUFILEdBV2xD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UjZCLElBYVY3QixFQUFJeUIsR0FJSDdCLEVBSkRrQyxFQUFBL0IsS0FBQUMsT0E2SkMsT0FwQkNNLEVBeldILFdBQ0EsSUFBQXlCLEVBQUEsR0FXRSxPQVZGOUIsTUFBQWhELFVBQUF5RCxRQUFBUCxLQUFBNkIsVUFBQSxTQUFBQyxHQUNBLElBQUEsSUFBQUosS0FBQUksRUFBQSxDQUtJLElBQUtBLEVBQUlDLGVBQWVMLEdBQU0sT0FKakNFLEVBQUlULEdBQVNXLEVBQUFKLE1BR1hFLEVBa1dXVCxDQUFPQyxFQUFVWSxHQUFXLElBR3ZDM0IsRUFBV0csUUFoSVpVLEVBbUlhQSxFQWxJYmhELEVBQUErRCxTQUFBN0MsS0FBQXVCLE9BQUEsSUFFQXJDLEVBQUkrQixTQUFhbEIsY0FBakIrQixFQUFBLHdCQUFBaEQsRUFBQStELFNBQUE3QyxLQUFBLE1BWkFLLEVBYUlVLElBa0lIdEIsU0FBU2dDLGdCQUFnQnFCLGlCQUFpQixRQUFTbkIsR0FBYyxHQUNqRWQsRUFBV2lDLGlCQUFpQixVQUFXakIsR0FBWSxHQVU3Q1osS0FhVFAsTUFBTXFDLEtBQUt0RCxTQUFTcUIsaUJBQWlCLHFDQUFxQ0ssUUFBUSxTQUFTakMsR0FDMUZtRCxRQUFRVyxJQUFLOUQsRUFBSW1DLElBQ04sSUFBSXpDLE1BQU8sSUFBTU0sRUFBSW1DIiwiZmlsZSI6InRhYnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiB0YWJieWpzIHYxMi4wLjNcbiAqIExpZ2h0d2VpZ2h0LCBhY2Nlc3NpYmxlIHZhbmlsbGEgSlMgdG9nZ2xlIHRhYnMuXG4gKiAoYykgMjAxOSBDaHJpcyBGZXJkaW5hbmRpXG4gKiBNSVQgTGljZW5zZVxuICogaHR0cDovL2dpdGh1Yi5jb20vY2ZlcmRpbmFuZGkvdGFiYnlcbiAqL1xuXG4vKipcbiAqIEVsZW1lbnQubWF0Y2hlcygpIHBvbHlmaWxsIChzaW1wbGUgdmVyc2lvbilcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L21hdGNoZXMjUG9seWZpbGxcbiAqL1xuaWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG5cdEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG59XG4vKipcbiAqIEVsZW1lbnQuY2xvc2VzdCgpIHBvbHlmaWxsXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9jbG9zZXN0I1BvbHlmaWxsXG4gKi9cbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xuXHRpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcblx0XHRFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuXHR9XG5cdEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbiAocykge1xuXHRcdHZhciBlbCA9IHRoaXM7XG5cdFx0dmFyIGFuY2VzdG9yID0gdGhpcztcblx0XHRpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xuXHRcdGRvIHtcblx0XHRcdGlmIChhbmNlc3Rvci5tYXRjaGVzKHMpKSByZXR1cm4gYW5jZXN0b3I7XG5cdFx0XHRhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudEVsZW1lbnQ7XG5cdFx0fSB3aGlsZSAoYW5jZXN0b3IgIT09IG51bGwpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9O1xufVxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuXHRcdGRlZmluZShbXSwgKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmYWN0b3J5KHJvb3QpO1xuXHRcdH0pKTtcblx0fSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyb290KTtcblx0fSBlbHNlIHtcblx0XHRyb290LlRhYmJ5ID0gZmFjdG9yeShyb290KTtcblx0fVxufSkodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIChmdW5jdGlvbiAod2luZG93KSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vXG5cdC8vIFZhcmlhYmxlc1xuXHQvL1xuXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRpZFByZWZpeDogJ3RhYmJ5LXRvZ2dsZV8nLFxuXHRcdGRlZmF1bHQ6ICdbZGF0YS10YWJieS1kZWZhdWx0XSdcblx0fTtcblxuXG5cdC8vXG5cdC8vIE1ldGhvZHNcblx0Ly9cblxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9yIG1vcmUgb2JqZWN0cyB0b2dldGhlci5cblx0ICogQHBhcmFtICAge09iamVjdH0gICBvYmplY3RzICBUaGUgb2JqZWN0cyB0byBtZXJnZSB0b2dldGhlclxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSAgICAgICAgICAgIE1lcmdlZCB2YWx1ZXMgb2YgZGVmYXVsdHMgYW5kIG9wdGlvbnNcblx0ICovXG5cdHZhciBleHRlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIG1lcmdlZCA9IHt9O1xuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYXJndW1lbnRzLCAoZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdFx0XHRpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSByZXR1cm47XG5cdFx0XHRcdG1lcmdlZFtrZXldID0gb2JqW2tleV07XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHRcdHJldHVybiBtZXJnZWQ7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVtaXQgYSBjdXN0b20gZXZlbnRcblx0ICogQHBhcmFtICB7U3RyaW5nfSB0eXBlICAgIFRoZSBldmVudCB0eXBlXG5cdCAqIEBwYXJhbSAge05vZGV9ICAgdGFiICAgICBUaGUgdGFiIHRvIGF0dGFjaCB0aGUgZXZlbnQgdG9cblx0ICogQHBhcmFtICB7Tm9kZX0gICBkZXRhaWxzIERldGFpbHMgYWJvdXQgdGhlIGV2ZW50XG5cdCAqL1xuXHR2YXIgZW1pdEV2ZW50ID0gZnVuY3Rpb24gKHRhYiwgZGV0YWlscykge1xuXG5cdFx0Ly8gQ3JlYXRlIGEgbmV3IGV2ZW50XG5cdFx0dmFyIGV2ZW50O1xuXHRcdGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRldmVudCA9IG5ldyBDdXN0b21FdmVudCgndGFiYnknLCB7XG5cdFx0XHRcdGJ1YmJsZXM6IHRydWUsXG5cdFx0XHRcdGNhbmNlbGFibGU6IHRydWUsXG5cdFx0XHRcdGRldGFpbDogZGV0YWlsc1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdFx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoJ3RhYmJ5JywgdHJ1ZSwgdHJ1ZSwgZGV0YWlscyk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzcGF0Y2ggdGhlIGV2ZW50XG5cdFx0dGFiLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFJlbW92ZSByb2xlcyBhbmQgYXR0cmlidXRlcyBmcm9tIGEgdGFiIGFuZCBpdHMgY29udGVudFxuXHQgKiBAcGFyYW0gIHtOb2RlfSAgIHRhYiAgICAgIFRoZSB0YWJcblx0ICogQHBhcmFtICB7Tm9kZX0gICBjb250ZW50ICBUaGUgdGFiIGNvbnRlbnRcblx0ICogQHBhcmFtICB7T2JqZWN0fSBzZXR0aW5ncyBVc2VyIHNldHRpbmdzIGFuZCBvcHRpb25zXG5cdCAqL1xuXHR2YXIgZGVzdHJveVRhYiA9IGZ1bmN0aW9uICh0YWIsIGNvbnRlbnQsIHNldHRpbmdzKSB7XG5cblx0XHQvLyBSZW1vdmUgdGhlIGdlbmVyYXRlZCBJRFxuXHRcdGlmICh0YWIuaWQuc2xpY2UoMCwgc2V0dGluZ3MuaWRQcmVmaXgubGVuZ3RoKSA9PT0gc2V0dGluZ3MuaWRQcmVmaXgpIHtcblx0XHRcdHRhYi5pZCA9ICcnO1xuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSByb2xlc1xuXHRcdHRhYi5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblx0XHR0YWIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG5cdFx0dGFiLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuXHRcdHRhYi5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG5cdFx0dGFiLmNsb3Nlc3QoJ2xpJykucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG5cdFx0Y29udGVudC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblx0XHRjb250ZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5Jyk7XG5cdFx0Y29udGVudC5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIEFkZCB0aGUgcmVxdWlyZWQgcm9sZXMgYW5kIGF0dHJpYnV0ZXMgdG8gYSB0YWIgYW5kIGl0cyBjb250ZW50XG5cdCAqIEBwYXJhbSAge05vZGV9ICAgdGFiICAgICAgVGhlIHRhYlxuXHQgKiBAcGFyYW0gIHtOb2RlfSAgIGNvbnRlbnQgIFRoZSB0YWIgY29udGVudFxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IHNldHRpbmdzIFVzZXIgc2V0dGluZ3MgYW5kIG9wdGlvbnNcblx0ICovXG5cdHZhciBzZXR1cFRhYiA9IGZ1bmN0aW9uICh0YWIsIGNvbnRlbnQsIHNldHRpbmdzKSB7XG5cblx0XHQvLyBHaXZlIHRhYiBhbiBJRCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgaGF2ZSBvbmVcblx0XHRpZiAoIXRhYi5pZCkge1xuXHRcdFx0dGFiLmlkID0gc2V0dGluZ3MuaWRQcmVmaXggKyBjb250ZW50LmlkO1xuXHRcdH1cblxuXHRcdC8vIEFkZCByb2xlc1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndGFiJyk7XG5cdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpO1xuXHRcdHRhYi5jbG9zZXN0KCdsaScpLnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcblx0XHRjb250ZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICd0YWJwYW5lbCcpO1xuXHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCB0YWIuaWQpO1xuXG5cdFx0Ly8gQWRkIHNlbGVjdGVkIHN0YXRlXG5cdFx0aWYgKHRhYi5tYXRjaGVzKHNldHRpbmdzLmRlZmF1bHQpKSB7XG5cdFx0XHR0YWIuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuXHRcdFx0dGFiLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcblx0XHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG5cdFx0fVxuXG5cdH07XG5cblx0LyoqXG5cdCAqIEhpZGUgYSB0YWIgYW5kIGl0cyBjb250ZW50XG5cdCAqIEBwYXJhbSAge05vZGV9IG5ld1RhYiBUaGUgbmV3IHRhYiB0aGF0J3MgcmVwbGFjaW5nIGl0XG5cdCAqL1xuXHR2YXIgaGlkZSA9IGZ1bmN0aW9uIChuZXdUYWIpIHtcblxuXHRcdC8vIFZhcmlhYmxlc1xuXHRcdHZhciB0YWJHcm91cCA9IG5ld1RhYi5jbG9zZXN0KCdbcm9sZT1cInRhYmxpc3RcIl0nKTtcblx0XHRpZiAoIXRhYkdyb3VwKSByZXR1cm4ge307XG5cdFx0dmFyIHRhYiA9IHRhYkdyb3VwLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwidGFiXCJdW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJyk7XG5cdFx0aWYgKCF0YWIpIHJldHVybiB7fTtcblx0XHR2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFiLmhhc2gpO1xuXG5cdFx0Ly8gSGlkZSB0aGUgdGFiXG5cdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG5cblx0XHQvLyBIaWRlIHRoZSBjb250ZW50XG5cdFx0aWYgKCFjb250ZW50KSByZXR1cm4ge3ByZXZpb3VzVGFiOiB0YWJ9O1xuXHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG5cblx0XHQvLyBSZXR1cm4gdGhlIGhpZGRlbiB0YWIgYW5kIGNvbnRlbnRcblx0XHRyZXR1cm4ge1xuXHRcdFx0cHJldmlvdXNUYWI6IHRhYixcblx0XHRcdHByZXZpb3VzQ29udGVudDogY29udGVudFxuXHRcdH07XG5cblx0fTtcblxuXHQvKipcblx0ICogU2hvdyBhIHRhYiBhbmQgaXRzIGNvbnRlbnRcblx0ICogQHBhcmFtICB7Tm9kZX0gdGFiICAgICAgVGhlIHRhYlxuXHQgKiBAcGFyYW0gIHtOb2RlfSBjb250ZW50ICBUaGUgdGFiIGNvbnRlbnRcblx0ICovXG5cdHZhciBzaG93ID0gZnVuY3Rpb24gKHRhYiwgY29udGVudCkge1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRjb250ZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cdFx0dGFiLmZvY3VzKCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIFRvZ2dsZSBhIG5ldyB0YWJcblx0ICogQHBhcmFtICB7Tm9kZX0gdGFiIFRoZSB0YWIgdG8gc2hvd1xuXHQgKi9cblx0dmFyIHRvZ2dsZSA9IGZ1bmN0aW9uICh0YWIpIHtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGVyZSdzIGEgdGFiIHRvIHRvZ2dsZSBhbmQgaXQncyBub3QgYWxyZWFkeSBhY3RpdmVcblx0XHRpZiAoIXRhYiB8fCB0YWIuZ2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJykgPT0gJ3RydWUnKSByZXR1cm47XG5cblx0XHQvLyBWYXJpYWJsZXNcblx0XHR2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFiLmhhc2gpO1xuXHRcdGlmICghY29udGVudCkgcmV0dXJuO1xuXG5cdFx0Ly8gSGlkZSBhY3RpdmUgdGFiIGFuZCBjb250ZW50XG5cdFx0dmFyIGRldGFpbHMgPSBoaWRlKHRhYik7XG5cblx0XHQvLyBTaG93IG5ldyB0YWIgYW5kIGNvbnRlbnRcblx0XHRzaG93KHRhYiwgY29udGVudCk7XG5cblx0XHQvLyBBZGQgZXZlbnQgZGV0YWlsc1xuXHRcdGRldGFpbHMudGFiID0gdGFiO1xuXHRcdGRldGFpbHMuY29udGVudCA9IGNvbnRlbnQ7XG5cblx0XHQvLyBFbWl0IGEgY3VzdG9tIGV2ZW50XG5cdFx0ZW1pdEV2ZW50KHRhYiwgZGV0YWlscyk7XG5cblx0fTtcblxuXHQvKipcblx0ICogR2V0IGFsbCBvZiB0aGUgdGFicyBpbiBhIHRhYmxpc3Rcblx0ICogQHBhcmFtICB7Tm9kZX0gICB0YWIgIEEgdGFiIGZyb20gdGhlIGxpc3Rcblx0ICogQHJldHVybiB7T2JqZWN0fSAgICAgIFRoZSB0YWJzIGFuZCB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgb25lXG5cdCAqL1xuXHR2YXIgZ2V0VGFic01hcCA9IGZ1bmN0aW9uICh0YWIpIHtcblx0XHR2YXIgdGFiR3JvdXAgPSB0YWIuY2xvc2VzdCgnW3JvbGU9XCJ0YWJsaXN0XCJdJyk7XG5cdFx0dmFyIHRhYnMgPSB0YWJHcm91cCA/IHRhYkdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwidGFiXCJdJykgOiBudWxsO1xuXHRcdGlmICghdGFicykgcmV0dXJuO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0YWJzOiB0YWJzLFxuXHRcdFx0aW5kZXg6IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGFicywgdGFiKVxuXHRcdH07XG5cdH07XG5cblx0LyoqXG5cdCAqIFN3aXRjaCB0aGUgYWN0aXZlIHRhYiBiYXNlZCBvbiBrZXlib2FyZCBhY3Rpdml0eVxuXHQgKiBAcGFyYW0gIHtOb2RlfSB0YWIgVGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiXG5cdCAqIEBwYXJhbSAge0tleX0gIGtleSBUaGUga2V5IHRoYXQgd2FzIHByZXNzZWRcblx0ICovXG5cdHZhciBzd2l0Y2hUYWJzID0gZnVuY3Rpb24gKHRhYiwga2V5KSB7XG5cblx0XHQvLyBHZXQgYSBtYXAgb2YgdGFic1xuXHRcdHZhciBtYXAgPSBnZXRUYWJzTWFwKHRhYik7XG5cdFx0aWYgKCFtYXApIHJldHVybjtcblx0XHR2YXIgbGVuZ3RoID0gbWFwLnRhYnMubGVuZ3RoIC0gMTtcblx0XHR2YXIgaW5kZXg7XG5cblx0XHQvLyBHbyB0byBwcmV2aW91cyB0YWJcblx0XHRpZiAoWydBcnJvd1VwJywgJ0Fycm93TGVmdCcsICdVcCcsICdMZWZ0J10uaW5kZXhPZihrZXkpID4gLTEpIHtcblx0XHRcdGluZGV4ID0gbWFwLmluZGV4IDwgMSA/IGxlbmd0aCA6IG1hcC5pbmRleCAtIDE7XG5cdFx0fVxuXG5cdFx0Ly8gR28gdG8gbmV4dCB0YWJcblx0XHRlbHNlIGlmIChbJ0Fycm93RG93bicsICdBcnJvd1JpZ2h0JywgJ0Rvd24nLCAnUmlnaHQnXS5pbmRleE9mKGtleSkgPiAtMSkge1xuXHRcdFx0aW5kZXggPSBtYXAuaW5kZXggPT09IGxlbmd0aCA/IDAgOiBtYXAuaW5kZXggKyAxO1xuXHRcdH1cblxuXHRcdC8vIEdvIHRvIGhvbWVcblx0XHRlbHNlIGlmIChrZXkgPT09ICdIb21lJykge1xuXHRcdFx0aW5kZXggPSAwO1xuXG5cdFx0fVxuXG5cdFx0Ly8gR28gdG8gZW5kXG5cdFx0ZWxzZSBpZiAoa2V5ID09PSAnRW5kJykge1xuXHRcdFx0aW5kZXggPSBsZW5ndGg7XG5cdFx0fVxuXG5cdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHR0b2dnbGUobWFwLnRhYnNbaW5kZXhdKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBY3RpdmF0ZSBhIHRhYiBiYXNlZCBvbiB0aGUgVVJMXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIGZvciB0aGlzIGluc3RhbnRpYXRpb25cblx0ICovXG5cdHZhciBsb2FkRnJvbVVSTCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHRcdGlmICh3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGggPCAxKSByZXR1cm47XG5cdFx0dmFyIHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IgKyAnIFtyb2xlPVwidGFiXCJdW2hyZWYqPVwiJyArIHdpbmRvdy5sb2NhdGlvbi5oYXNoICsgJ1wiXScpO1xuXHRcdHRvZ2dsZSh0YWIpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGUgdGhlIENvbnN0cnVjdG9yIG9iamVjdFxuXHQgKi9cblx0dmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBvcHRpb25zKSB7XG5cblx0XHQvL1xuXHRcdC8vIFZhcmlhYmxlc1xuXHRcdC8vXG5cblx0XHR2YXIgcHVibGljQVBJcyA9IHt9O1xuXHRcdHZhciBzZXR0aW5ncywgdGFiV3JhcHBlcjtcblxuXG5cdFx0Ly9cblx0XHQvLyBNZXRob2RzXG5cdFx0Ly9cblxuXHRcdHB1YmxpY0FQSXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Ly8gR2V0IGFsbCB0YWJzXG5cdFx0XHR2YXIgdGFicyA9IHRhYldyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXG5cdFx0XHQvLyBBZGQgcm9sZXMgdG8gdGFic1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWJzLCAoZnVuY3Rpb24gKHRhYikge1xuXG5cdFx0XHRcdC8vIEdldCB0aGUgdGFiIGNvbnRlbnRcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhYi5oYXNoKTtcblx0XHRcdFx0aWYgKCFjb250ZW50KSByZXR1cm47XG5cblx0XHRcdFx0Ly8gU2V0dXAgdGhlIHRhYlxuXHRcdFx0XHRkZXN0cm95VGFiKHRhYiwgY29udGVudCwgc2V0dGluZ3MpO1xuXG5cdFx0XHR9KSk7XG5cblx0XHRcdC8vIFJlbW92ZSByb2xlIGZyb20gd3JhcHBlclxuXHRcdFx0dGFiV3JhcHBlci5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyLCB0cnVlKTtcblx0XHRcdHRhYldyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIHRydWUpO1xuXG5cdFx0XHQvLyBSZXNldCB2YXJpYWJsZXNcblx0XHRcdHNldHRpbmdzID0gbnVsbDtcblx0XHRcdHRhYldyYXBwZXIgPSBudWxsO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFNldHVwIHRoZSBET00gd2l0aCB0aGUgcHJvcGVyIGF0dHJpYnV0ZXNcblx0XHQgKi9cblx0XHRwdWJsaWNBUElzLnNldHVwID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvLyBWYXJpYWJsZXNcblx0XHRcdHRhYldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHRcdGlmICghdGFiV3JhcHBlcikgcmV0dXJuO1xuXHRcdFx0dmFyIHRhYnMgPSB0YWJXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblxuXHRcdFx0Ly8gQWRkIHJvbGUgdG8gd3JhcHBlclxuXHRcdFx0dGFiV3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndGFibGlzdCcpO1xuXG5cdFx0XHQvLyBBZGQgcm9sZXMgdG8gdGFic1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWJzLCAoZnVuY3Rpb24gKHRhYikge1xuXG5cdFx0XHRcdC8vIEdldCB0aGUgdGFiIGNvbnRlbnRcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhYi5oYXNoKTtcblx0XHRcdFx0aWYgKCFjb250ZW50KSByZXR1cm47XG5cblx0XHRcdFx0Ly8gU2V0dXAgdGhlIHRhYlxuXHRcdFx0XHRzZXR1cFRhYih0YWIsIGNvbnRlbnQsIHNldHRpbmdzKTtcblxuXHRcdFx0fSkpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFRvZ2dsZSBhIHRhYiBiYXNlZCBvbiBhbiBJRFxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ3xOb2RlfSBpZCBUaGUgdGFiIHRvIHRvZ2dsZVxuXHRcdCAqL1xuXHRcdHB1YmxpY0FQSXMudG9nZ2xlID0gZnVuY3Rpb24gKGlkKSB7XG5cblx0XHRcdC8vIEdldCB0aGUgdGFiXG5cdFx0XHR2YXIgdGFiID0gaWQ7XG5cdFx0XHRpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHR0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yICsgJyBbcm9sZT1cInRhYlwiXVtocmVmKj1cIicgKyBpZCArICdcIl0nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHRcdHRvZ2dsZSh0YWIpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZSBjbGljayBldmVudHNcblx0XHQgKi9cblx0XHR2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHRcdC8vIE9ubHkgcnVuIG9uIHRvZ2dsZXNcblx0XHRcdHZhciB0YWIgPSBldmVudC50YXJnZXQuY2xvc2VzdChzZWxlY3RvciArICcgW3JvbGU9XCJ0YWJcIl0nKTtcblx0XHRcdGlmICghdGFiKSByZXR1cm47XG5cblx0XHRcdC8vIFByZXZlbnQgbGluayBiZWhhdmlvclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHRcdHRvZ2dsZSh0YWIpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZSBrZXlkb3duIGV2ZW50c1xuXHRcdCAqL1xuXHRcdHZhciBrZXlIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHRcdC8vIE9ubHkgcnVuIGlmIGEgdGFiIGlzIGluIGZvY3VzXG5cdFx0XHR2YXIgdGFiID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHRcdGlmICghdGFiLm1hdGNoZXMoc2VsZWN0b3IgKyAnIFtyb2xlPVwidGFiXCJdJykpIHJldHVybjtcblxuXHRcdFx0Ly8gT25seSBydW4gZm9yIHNwZWNpZmljIGtleXNcblx0XHRcdGlmIChbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1VwJywgJ0Rvd24nLCAnTGVmdCcsICdSaWdodCcsICdIb21lJywgJ0VuZCddLmluZGV4T2YoZXZlbnQua2V5KSA8IDApIHJldHVybjtcblxuXHRcdFx0Ly8gU3dpdGNoIHRhYnNcblx0XHRcdHN3aXRjaFRhYnModGFiLCBldmVudC5rZXkpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemUgdGhlIGluc3RhbmNlXG5cdFx0ICovXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdC8vIE1lcmdlIHVzZXIgb3B0aW9ucyB3aXRoIGRlZmF1bHRzXG5cdFx0XHRzZXR0aW5ncyA9IGV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cblx0XHRcdC8vIFNldHVwIHRoZSBET01cblx0XHRcdHB1YmxpY0FQSXMuc2V0dXAoKTtcblxuXHRcdFx0Ly8gTG9hZCBhIHRhYiBmcm9tIHRoZSBVUkxcblx0XHRcdGxvYWRGcm9tVVJMKHNlbGVjdG9yKTtcblxuXHRcdFx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyLCB0cnVlKTtcblx0XHRcdHRhYldyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIHRydWUpO1xuXG5cdFx0fTtcblxuXG5cdFx0Ly9cblx0XHQvLyBJbml0aWFsaXplIGFuZCByZXR1cm4gdGhlIFB1YmxpYyBBUElzXG5cdFx0Ly9cblxuXHRcdGluaXQoKTtcblx0XHRyZXR1cm4gcHVibGljQVBJcztcblxuXHR9O1xuXG5cblx0Ly9cblx0Ly8gUmV0dXJuIHRoZSBDb25zdHJ1Y3RvclxuXHQvL1xuXG5cdHJldHVybiBDb25zdHJ1Y3RvcjtcblxufSkpO1xuXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53cC1ibG9jay1jcm9zc3dpbmRzLWJsb2Nrcy10YWJzJykpLmZvckVhY2goZnVuY3Rpb24odGFiKSB7XG5cdGNvbnNvbGUubG9nKCB0YWIuaWQgKTtcblx0dmFyIHRhYnMgPSBuZXcgVGFiYnkoICcjJyArIHRhYi5pZCApO1xufSk7XG4iXX0=