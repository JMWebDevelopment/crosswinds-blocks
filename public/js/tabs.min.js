"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(e):e.Tabby=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(u){var l={idPrefix:"tabby-toggle_",default:"[data-tabby-default]"},o=function(e,t){var r;"function"==typeof u.CustomEvent?r=new CustomEvent("tabby",{bubbles:!0,cancelable:!0,detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent("tabby",!0,!0,t),e.dispatchEvent(r)},n=function(e){e=e.closest('[role="tablist"]');if(!e)return{};e=e.querySelector('[role="tab"][aria-selected="true"]');if(!e)return{};var t=document.querySelector(e.hash);return e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1"),t?(t.setAttribute("hidden","hidden"),{previousTab:e,previousContent:t}):{previousTab:e}},i=function(e,t){e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),t.removeAttribute("hidden"),e.focus()},c=function(e){var t,r;!e||"true"==e.getAttribute("aria-selected")||(t=document.querySelector(e.hash))&&(r=n(e),i(e,t),r.tab=e,r.content=t,o(e,r))},d=function(e){var t=e.closest('[role="tablist"]'),t=t?t.querySelectorAll('[role="tab"]'):null;if(t)return{tabs:t,index:Array.prototype.indexOf.call(t,e)}};return function(n,e){var o,t,r={},i=(r.destroy=function(){var e=t.querySelectorAll("a");Array.prototype.forEach.call(e,function(e){var t,r=document.querySelector(e.hash);r&&(r=r,t=o,(e=e).id.slice(0,t.idPrefix.length)===t.idPrefix&&(e.id=""),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex"),e.closest("li").removeAttribute("role"),r.removeAttribute("role"),r.removeAttribute("aria-labelledby"),r.removeAttribute("hidden"))}),t.removeAttribute("role"),document.documentElement.removeEventListener("click",i,!0),t.removeEventListener("keydown",a,!0),t=o=null},r.setup=function(){var e;(t=document.querySelector(n))&&(e=t.querySelectorAll("a"),t.setAttribute("role","tablist"),Array.prototype.forEach.call(e,function(e){var t,r=document.querySelector(e.hash);r&&(r=r,t=o,(e=e).id||(e.id=t.idPrefix+r.id),e.setAttribute("role","tab"),e.setAttribute("aria-controls",r.id),e.closest("li").setAttribute("role","presentation"),r.setAttribute("role","tabpanel"),r.setAttribute("aria-labelledby",e.id),e.matches(t.default)?e.setAttribute("aria-selected","true"):(e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1"),r.setAttribute("hidden","hidden")))}))},r.toggle=function(e){var t=e;"string"==typeof e&&(t=document.querySelector(n+' [role="tab"][href*="'+e+'"]')),c(t)},function(e){var t=e.target.closest(n+' [role="tab"]');t&&(e.preventDefault(),c(t))}),a=function(e){var t,r,o=document.activeElement;!o.matches(n+' [role="tab"]')||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","Home","End"].indexOf(e.key)<0||(o=o,e=e.key,(o=d(o))&&(t=o.tabs.length-1,-1<["ArrowUp","ArrowLeft","Up","Left"].indexOf(e)?r=o.index<1?t:o.index-1:-1<["ArrowDown","ArrowRight","Down","Right"].indexOf(e)?r=o.index===t?0:o.index+1:"Home"===e?r=0:"End"===e&&(r=t),c(o.tabs[r])))};return o=function(){var r={};return Array.prototype.forEach.call(arguments,function(e){for(var t in e){if(!e.hasOwnProperty(t))return;r[t]=e[t]}}),r}(l,e||{}),r.setup(),e=n,u.location.hash.length<1||(e=document.querySelector(e+' [role="tab"][href*="'+u.location.hash+'"]'),c(e)),document.documentElement.addEventListener("click",i,!0),t.addEventListener("keydown",a,!0),r}});var tabs=new Tabby("[data-tabs]");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYnMuanMiXSwibmFtZXMiOlsiRWxlbWVudCIsInByb3RvdHlwZSIsIm1hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsImRlZmluZSIsImZhY3RvcnkiLCJyb290IiwiZXhwb3J0cyIsIm1vZHVsZSIsIlRhYmJ5IiwiZ2xvYmFsIiwid2luZG93IiwiZGVmYXVsdHMiLCJpZFByZWZpeCIsImRlZmF1bHQiLCJlbWl0RXZlbnQiLCJldmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGV0YWlscyIsInRhYiIsImRpc3BhdGNoRXZlbnQiLCJoaWRlIiwidGFiR3JvdXAiLCJuZXdUYWIiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiY29udGVudCIsImhhc2giLCJwcmV2aW91c1RhYiIsInByZXZpb3VzQ29udGVudCIsInNob3ciLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb2N1cyIsInRvZ2dsZSIsImdldFRhYnNNYXAiLCJjbG9zZXN0IiwidGFicyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleCIsInN3aXRjaFRhYnMiLCJpbmRleE9mIiwia2V5Iiwic2VsZWN0b3IiLCJvcHRpb25zIiwidGFiV3JhcHBlciIsImRvY3VtZW50RWxlbWVudCIsInB1YmxpY0FQSXMiLCJkZXN0cm95IiwiQXJyYXkiLCJjYWxsIiwic2V0dGluZ3MiLCJkZXN0cm95VGFiIiwiaWQiLCJzbGljZSIsImxlbmd0aCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGlja0hhbmRsZXIiLCJrZXlIYW5kbGVyIiwic2V0dXAiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiYWN0aXZlRWxlbWVudCIsIm1hcCIsImxvYWRGcm9tVVJMIiwiQ29uc3RydWN0b3IiLCJh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N0MsS0FBQSxNQXRCRE0sRUF1QkNkLElBd0hBSixTQUFTOEIsZ0JBQWdCZSxpQkFBaUIsUUFBU0osR0FBYyxHQUNqRVosRUFBV2dCLGlCQUFpQixVQUFXSCxHQUFZLEdBVTdDWCxLQVlULElBQUlWLEtBQU8sSUFBSWpDLE1BQU0iLCJmaWxlIjoidGFicy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIHRhYmJ5anMgdjEyLjAuM1xuICogTGlnaHR3ZWlnaHQsIGFjY2Vzc2libGUgdmFuaWxsYSBKUyB0b2dnbGUgdGFicy5cbiAqIChjKSAyMDE5IENocmlzIEZlcmRpbmFuZGlcbiAqIE1JVCBMaWNlbnNlXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9jZmVyZGluYW5kaS90YWJieVxuICovXG5cbi8qKlxuICogRWxlbWVudC5tYXRjaGVzKCkgcG9seWZpbGwgKHNpbXBsZSB2ZXJzaW9uKVxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvbWF0Y2hlcyNQb2x5ZmlsbFxuICovXG5cbmlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xuXHRFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xufVxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuXHRcdGRlZmluZShbXSwgKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmYWN0b3J5KHJvb3QpO1xuXHRcdH0pKTtcblx0fSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyb290KTtcblx0fSBlbHNlIHtcblx0XHRyb290LlRhYmJ5ID0gZmFjdG9yeShyb290KTtcblx0fVxufSkodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIChmdW5jdGlvbiAod2luZG93KSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vXG5cdC8vIFZhcmlhYmxlc1xuXHQvL1xuXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRpZFByZWZpeDogJ3RhYmJ5LXRvZ2dsZV8nLFxuXHRcdGRlZmF1bHQ6ICdbZGF0YS10YWJieS1kZWZhdWx0XSdcblx0fTtcblxuXG5cdC8vXG5cdC8vIE1ldGhvZHNcblx0Ly9cblxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9yIG1vcmUgb2JqZWN0cyB0b2dldGhlci5cblx0ICogQHBhcmFtICAge09iamVjdH0gICBvYmplY3RzICBUaGUgb2JqZWN0cyB0byBtZXJnZSB0b2dldGhlclxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSAgICAgICAgICAgIE1lcmdlZCB2YWx1ZXMgb2YgZGVmYXVsdHMgYW5kIG9wdGlvbnNcblx0ICovXG5cdHZhciBleHRlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIG1lcmdlZCA9IHt9O1xuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYXJndW1lbnRzLCAoZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdFx0XHRpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSByZXR1cm47XG5cdFx0XHRcdG1lcmdlZFtrZXldID0gb2JqW2tleV07XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHRcdHJldHVybiBtZXJnZWQ7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVtaXQgYSBjdXN0b20gZXZlbnRcblx0ICogQHBhcmFtICB7U3RyaW5nfSB0eXBlICAgIFRoZSBldmVudCB0eXBlXG5cdCAqIEBwYXJhbSAge05vZGV9ICAgdGFiICAgICBUaGUgdGFiIHRvIGF0dGFjaCB0aGUgZXZlbnQgdG9cblx0ICogQHBhcmFtICB7Tm9kZX0gICBkZXRhaWxzIERldGFpbHMgYWJvdXQgdGhlIGV2ZW50XG5cdCAqL1xuXHR2YXIgZW1pdEV2ZW50ID0gZnVuY3Rpb24gKHRhYiwgZGV0YWlscykge1xuXG5cdFx0Ly8gQ3JlYXRlIGEgbmV3IGV2ZW50XG5cdFx0dmFyIGV2ZW50O1xuXHRcdGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRldmVudCA9IG5ldyBDdXN0b21FdmVudCgndGFiYnknLCB7XG5cdFx0XHRcdGJ1YmJsZXM6IHRydWUsXG5cdFx0XHRcdGNhbmNlbGFibGU6IHRydWUsXG5cdFx0XHRcdGRldGFpbDogZGV0YWlsc1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdFx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoJ3RhYmJ5JywgdHJ1ZSwgdHJ1ZSwgZGV0YWlscyk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzcGF0Y2ggdGhlIGV2ZW50XG5cdFx0dGFiLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIFJlbW92ZSByb2xlcyBhbmQgYXR0cmlidXRlcyBmcm9tIGEgdGFiIGFuZCBpdHMgY29udGVudFxuXHQgKiBAcGFyYW0gIHtOb2RlfSAgIHRhYiAgICAgIFRoZSB0YWJcblx0ICogQHBhcmFtICB7Tm9kZX0gICBjb250ZW50ICBUaGUgdGFiIGNvbnRlbnRcblx0ICogQHBhcmFtICB7T2JqZWN0fSBzZXR0aW5ncyBVc2VyIHNldHRpbmdzIGFuZCBvcHRpb25zXG5cdCAqL1xuXHR2YXIgZGVzdHJveVRhYiA9IGZ1bmN0aW9uICh0YWIsIGNvbnRlbnQsIHNldHRpbmdzKSB7XG5cblx0XHQvLyBSZW1vdmUgdGhlIGdlbmVyYXRlZCBJRFxuXHRcdGlmICh0YWIuaWQuc2xpY2UoMCwgc2V0dGluZ3MuaWRQcmVmaXgubGVuZ3RoKSA9PT0gc2V0dGluZ3MuaWRQcmVmaXgpIHtcblx0XHRcdHRhYi5pZCA9ICcnO1xuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSByb2xlc1xuXHRcdHRhYi5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblx0XHR0YWIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG5cdFx0dGFiLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuXHRcdHRhYi5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG5cdFx0dGFiLmNsb3Nlc3QoJ2xpJykucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG5cdFx0Y29udGVudC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblx0XHRjb250ZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5Jyk7XG5cdFx0Y29udGVudC5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIEFkZCB0aGUgcmVxdWlyZWQgcm9sZXMgYW5kIGF0dHJpYnV0ZXMgdG8gYSB0YWIgYW5kIGl0cyBjb250ZW50XG5cdCAqIEBwYXJhbSAge05vZGV9ICAgdGFiICAgICAgVGhlIHRhYlxuXHQgKiBAcGFyYW0gIHtOb2RlfSAgIGNvbnRlbnQgIFRoZSB0YWIgY29udGVudFxuXHQgKiBAcGFyYW0gIHtPYmplY3R9IHNldHRpbmdzIFVzZXIgc2V0dGluZ3MgYW5kIG9wdGlvbnNcblx0ICovXG5cdHZhciBzZXR1cFRhYiA9IGZ1bmN0aW9uICh0YWIsIGNvbnRlbnQsIHNldHRpbmdzKSB7XG5cblx0XHQvLyBHaXZlIHRhYiBhbiBJRCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgaGF2ZSBvbmVcblx0XHRpZiAoIXRhYi5pZCkge1xuXHRcdFx0dGFiLmlkID0gc2V0dGluZ3MuaWRQcmVmaXggKyBjb250ZW50LmlkO1xuXHRcdH1cblxuXHRcdC8vIEFkZCByb2xlc1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndGFiJyk7XG5cdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpO1xuXHRcdHRhYi5jbG9zZXN0KCdsaScpLnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcblx0XHRjb250ZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICd0YWJwYW5lbCcpO1xuXHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCB0YWIuaWQpO1xuXG5cdFx0Ly8gQWRkIHNlbGVjdGVkIHN0YXRlXG5cdFx0aWYgKHRhYi5tYXRjaGVzKHNldHRpbmdzLmRlZmF1bHQpKSB7XG5cdFx0XHR0YWIuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuXHRcdFx0dGFiLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcblx0XHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG5cdFx0fVxuXG5cdH07XG5cblx0LyoqXG5cdCAqIEhpZGUgYSB0YWIgYW5kIGl0cyBjb250ZW50XG5cdCAqIEBwYXJhbSAge05vZGV9IG5ld1RhYiBUaGUgbmV3IHRhYiB0aGF0J3MgcmVwbGFjaW5nIGl0XG5cdCAqL1xuXHR2YXIgaGlkZSA9IGZ1bmN0aW9uIChuZXdUYWIpIHtcblxuXHRcdC8vIFZhcmlhYmxlc1xuXHRcdHZhciB0YWJHcm91cCA9IG5ld1RhYi5jbG9zZXN0KCdbcm9sZT1cInRhYmxpc3RcIl0nKTtcblx0XHRpZiAoIXRhYkdyb3VwKSByZXR1cm4ge307XG5cdFx0dmFyIHRhYiA9IHRhYkdyb3VwLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwidGFiXCJdW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJyk7XG5cdFx0aWYgKCF0YWIpIHJldHVybiB7fTtcblx0XHR2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFiLmhhc2gpO1xuXG5cdFx0Ly8gSGlkZSB0aGUgdGFiXG5cdFx0dGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG5cblx0XHQvLyBIaWRlIHRoZSBjb250ZW50XG5cdFx0aWYgKCFjb250ZW50KSByZXR1cm4ge3ByZXZpb3VzVGFiOiB0YWJ9O1xuXHRcdGNvbnRlbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG5cblx0XHQvLyBSZXR1cm4gdGhlIGhpZGRlbiB0YWIgYW5kIGNvbnRlbnRcblx0XHRyZXR1cm4ge1xuXHRcdFx0cHJldmlvdXNUYWI6IHRhYixcblx0XHRcdHByZXZpb3VzQ29udGVudDogY29udGVudFxuXHRcdH07XG5cblx0fTtcblxuXHQvKipcblx0ICogU2hvdyBhIHRhYiBhbmQgaXRzIGNvbnRlbnRcblx0ICogQHBhcmFtICB7Tm9kZX0gdGFiICAgICAgVGhlIHRhYlxuXHQgKiBAcGFyYW0gIHtOb2RlfSBjb250ZW50ICBUaGUgdGFiIGNvbnRlbnRcblx0ICovXG5cdHZhciBzaG93ID0gZnVuY3Rpb24gKHRhYiwgY29udGVudCkge1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuXHRcdHRhYi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRjb250ZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cdFx0dGFiLmZvY3VzKCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIFRvZ2dsZSBhIG5ldyB0YWJcblx0ICogQHBhcmFtICB7Tm9kZX0gdGFiIFRoZSB0YWIgdG8gc2hvd1xuXHQgKi9cblx0dmFyIHRvZ2dsZSA9IGZ1bmN0aW9uICh0YWIpIHtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGVyZSdzIGEgdGFiIHRvIHRvZ2dsZSBhbmQgaXQncyBub3QgYWxyZWFkeSBhY3RpdmVcblx0XHRpZiAoIXRhYiB8fCB0YWIuZ2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJykgPT0gJ3RydWUnKSByZXR1cm47XG5cblx0XHQvLyBWYXJpYWJsZXNcblx0XHR2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFiLmhhc2gpO1xuXHRcdGlmICghY29udGVudCkgcmV0dXJuO1xuXG5cdFx0Ly8gSGlkZSBhY3RpdmUgdGFiIGFuZCBjb250ZW50XG5cdFx0dmFyIGRldGFpbHMgPSBoaWRlKHRhYik7XG5cblx0XHQvLyBTaG93IG5ldyB0YWIgYW5kIGNvbnRlbnRcblx0XHRzaG93KHRhYiwgY29udGVudCk7XG5cblx0XHQvLyBBZGQgZXZlbnQgZGV0YWlsc1xuXHRcdGRldGFpbHMudGFiID0gdGFiO1xuXHRcdGRldGFpbHMuY29udGVudCA9IGNvbnRlbnQ7XG5cblx0XHQvLyBFbWl0IGEgY3VzdG9tIGV2ZW50XG5cdFx0ZW1pdEV2ZW50KHRhYiwgZGV0YWlscyk7XG5cblx0fTtcblxuXHQvKipcblx0ICogR2V0IGFsbCBvZiB0aGUgdGFicyBpbiBhIHRhYmxpc3Rcblx0ICogQHBhcmFtICB7Tm9kZX0gICB0YWIgIEEgdGFiIGZyb20gdGhlIGxpc3Rcblx0ICogQHJldHVybiB7T2JqZWN0fSAgICAgIFRoZSB0YWJzIGFuZCB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgb25lXG5cdCAqL1xuXHR2YXIgZ2V0VGFic01hcCA9IGZ1bmN0aW9uICh0YWIpIHtcblx0XHR2YXIgdGFiR3JvdXAgPSB0YWIuY2xvc2VzdCgnW3JvbGU9XCJ0YWJsaXN0XCJdJyk7XG5cdFx0dmFyIHRhYnMgPSB0YWJHcm91cCA/IHRhYkdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwidGFiXCJdJykgOiBudWxsO1xuXHRcdGlmICghdGFicykgcmV0dXJuO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0YWJzOiB0YWJzLFxuXHRcdFx0aW5kZXg6IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGFicywgdGFiKVxuXHRcdH07XG5cdH07XG5cblx0LyoqXG5cdCAqIFN3aXRjaCB0aGUgYWN0aXZlIHRhYiBiYXNlZCBvbiBrZXlib2FyZCBhY3Rpdml0eVxuXHQgKiBAcGFyYW0gIHtOb2RlfSB0YWIgVGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiXG5cdCAqIEBwYXJhbSAge0tleX0gIGtleSBUaGUga2V5IHRoYXQgd2FzIHByZXNzZWRcblx0ICovXG5cdHZhciBzd2l0Y2hUYWJzID0gZnVuY3Rpb24gKHRhYiwga2V5KSB7XG5cblx0XHQvLyBHZXQgYSBtYXAgb2YgdGFic1xuXHRcdHZhciBtYXAgPSBnZXRUYWJzTWFwKHRhYik7XG5cdFx0aWYgKCFtYXApIHJldHVybjtcblx0XHR2YXIgbGVuZ3RoID0gbWFwLnRhYnMubGVuZ3RoIC0gMTtcblx0XHR2YXIgaW5kZXg7XG5cblx0XHQvLyBHbyB0byBwcmV2aW91cyB0YWJcblx0XHRpZiAoWydBcnJvd1VwJywgJ0Fycm93TGVmdCcsICdVcCcsICdMZWZ0J10uaW5kZXhPZihrZXkpID4gLTEpIHtcblx0XHRcdGluZGV4ID0gbWFwLmluZGV4IDwgMSA/IGxlbmd0aCA6IG1hcC5pbmRleCAtIDE7XG5cdFx0fVxuXG5cdFx0Ly8gR28gdG8gbmV4dCB0YWJcblx0XHRlbHNlIGlmIChbJ0Fycm93RG93bicsICdBcnJvd1JpZ2h0JywgJ0Rvd24nLCAnUmlnaHQnXS5pbmRleE9mKGtleSkgPiAtMSkge1xuXHRcdFx0aW5kZXggPSBtYXAuaW5kZXggPT09IGxlbmd0aCA/IDAgOiBtYXAuaW5kZXggKyAxO1xuXHRcdH1cblxuXHRcdC8vIEdvIHRvIGhvbWVcblx0XHRlbHNlIGlmIChrZXkgPT09ICdIb21lJykge1xuXHRcdFx0aW5kZXggPSAwO1xuXG5cdFx0fVxuXG5cdFx0Ly8gR28gdG8gZW5kXG5cdFx0ZWxzZSBpZiAoa2V5ID09PSAnRW5kJykge1xuXHRcdFx0aW5kZXggPSBsZW5ndGg7XG5cdFx0fVxuXG5cdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHR0b2dnbGUobWFwLnRhYnNbaW5kZXhdKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBY3RpdmF0ZSBhIHRhYiBiYXNlZCBvbiB0aGUgVVJMXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIGZvciB0aGlzIGluc3RhbnRpYXRpb25cblx0ICovXG5cdHZhciBsb2FkRnJvbVVSTCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHRcdGlmICh3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGggPCAxKSByZXR1cm47XG5cdFx0dmFyIHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IgKyAnIFtyb2xlPVwidGFiXCJdW2hyZWYqPVwiJyArIHdpbmRvdy5sb2NhdGlvbi5oYXNoICsgJ1wiXScpO1xuXHRcdHRvZ2dsZSh0YWIpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGUgdGhlIENvbnN0cnVjdG9yIG9iamVjdFxuXHQgKi9cblx0dmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBvcHRpb25zKSB7XG5cblx0XHQvL1xuXHRcdC8vIFZhcmlhYmxlc1xuXHRcdC8vXG5cblx0XHR2YXIgcHVibGljQVBJcyA9IHt9O1xuXHRcdHZhciBzZXR0aW5ncywgdGFiV3JhcHBlcjtcblxuXG5cdFx0Ly9cblx0XHQvLyBNZXRob2RzXG5cdFx0Ly9cblxuXHRcdHB1YmxpY0FQSXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Ly8gR2V0IGFsbCB0YWJzXG5cdFx0XHR2YXIgdGFicyA9IHRhYldyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXG5cdFx0XHQvLyBBZGQgcm9sZXMgdG8gdGFic1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWJzLCAoZnVuY3Rpb24gKHRhYikge1xuXG5cdFx0XHRcdC8vIEdldCB0aGUgdGFiIGNvbnRlbnRcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhYi5oYXNoKTtcblx0XHRcdFx0aWYgKCFjb250ZW50KSByZXR1cm47XG5cblx0XHRcdFx0Ly8gU2V0dXAgdGhlIHRhYlxuXHRcdFx0XHRkZXN0cm95VGFiKHRhYiwgY29udGVudCwgc2V0dGluZ3MpO1xuXG5cdFx0XHR9KSk7XG5cblx0XHRcdC8vIFJlbW92ZSByb2xlIGZyb20gd3JhcHBlclxuXHRcdFx0dGFiV3JhcHBlci5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyLCB0cnVlKTtcblx0XHRcdHRhYldyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIHRydWUpO1xuXG5cdFx0XHQvLyBSZXNldCB2YXJpYWJsZXNcblx0XHRcdHNldHRpbmdzID0gbnVsbDtcblx0XHRcdHRhYldyYXBwZXIgPSBudWxsO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFNldHVwIHRoZSBET00gd2l0aCB0aGUgcHJvcGVyIGF0dHJpYnV0ZXNcblx0XHQgKi9cblx0XHRwdWJsaWNBUElzLnNldHVwID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvLyBWYXJpYWJsZXNcblx0XHRcdHRhYldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHRcdGlmICghdGFiV3JhcHBlcikgcmV0dXJuO1xuXHRcdFx0dmFyIHRhYnMgPSB0YWJXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblxuXHRcdFx0Ly8gQWRkIHJvbGUgdG8gd3JhcHBlclxuXHRcdFx0dGFiV3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndGFibGlzdCcpO1xuXG5cdFx0XHQvLyBBZGQgcm9sZXMgdG8gdGFic1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWJzLCAoZnVuY3Rpb24gKHRhYikge1xuXG5cdFx0XHRcdC8vIEdldCB0aGUgdGFiIGNvbnRlbnRcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhYi5oYXNoKTtcblx0XHRcdFx0aWYgKCFjb250ZW50KSByZXR1cm47XG5cblx0XHRcdFx0Ly8gU2V0dXAgdGhlIHRhYlxuXHRcdFx0XHRzZXR1cFRhYih0YWIsIGNvbnRlbnQsIHNldHRpbmdzKTtcblxuXHRcdFx0fSkpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFRvZ2dsZSBhIHRhYiBiYXNlZCBvbiBhbiBJRFxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ3xOb2RlfSBpZCBUaGUgdGFiIHRvIHRvZ2dsZVxuXHRcdCAqL1xuXHRcdHB1YmxpY0FQSXMudG9nZ2xlID0gZnVuY3Rpb24gKGlkKSB7XG5cblx0XHRcdC8vIEdldCB0aGUgdGFiXG5cdFx0XHR2YXIgdGFiID0gaWQ7XG5cdFx0XHRpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHR0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yICsgJyBbcm9sZT1cInRhYlwiXVtocmVmKj1cIicgKyBpZCArICdcIl0nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHRcdHRvZ2dsZSh0YWIpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZSBjbGljayBldmVudHNcblx0XHQgKi9cblx0XHR2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHRcdC8vIE9ubHkgcnVuIG9uIHRvZ2dsZXNcblx0XHRcdHZhciB0YWIgPSBldmVudC50YXJnZXQuY2xvc2VzdChzZWxlY3RvciArICcgW3JvbGU9XCJ0YWJcIl0nKTtcblx0XHRcdGlmICghdGFiKSByZXR1cm47XG5cblx0XHRcdC8vIFByZXZlbnQgbGluayBiZWhhdmlvclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0Ly8gVG9nZ2xlIHRoZSB0YWJcblx0XHRcdHRvZ2dsZSh0YWIpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZSBrZXlkb3duIGV2ZW50c1xuXHRcdCAqL1xuXHRcdHZhciBrZXlIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHRcdC8vIE9ubHkgcnVuIGlmIGEgdGFiIGlzIGluIGZvY3VzXG5cdFx0XHR2YXIgdGFiID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHRcdGlmICghdGFiLm1hdGNoZXMoc2VsZWN0b3IgKyAnIFtyb2xlPVwidGFiXCJdJykpIHJldHVybjtcblxuXHRcdFx0Ly8gT25seSBydW4gZm9yIHNwZWNpZmljIGtleXNcblx0XHRcdGlmIChbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1VwJywgJ0Rvd24nLCAnTGVmdCcsICdSaWdodCcsICdIb21lJywgJ0VuZCddLmluZGV4T2YoZXZlbnQua2V5KSA8IDApIHJldHVybjtcblxuXHRcdFx0Ly8gU3dpdGNoIHRhYnNcblx0XHRcdHN3aXRjaFRhYnModGFiLCBldmVudC5rZXkpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemUgdGhlIGluc3RhbmNlXG5cdFx0ICovXG5cdFx0dmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdC8vIE1lcmdlIHVzZXIgb3B0aW9ucyB3aXRoIGRlZmF1bHRzXG5cdFx0XHRzZXR0aW5ncyA9IGV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cblx0XHRcdC8vIFNldHVwIHRoZSBET01cblx0XHRcdHB1YmxpY0FQSXMuc2V0dXAoKTtcblxuXHRcdFx0Ly8gTG9hZCBhIHRhYiBmcm9tIHRoZSBVUkxcblx0XHRcdGxvYWRGcm9tVVJMKHNlbGVjdG9yKTtcblxuXHRcdFx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyLCB0cnVlKTtcblx0XHRcdHRhYldyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIHRydWUpO1xuXG5cdFx0fTtcblxuXG5cdFx0Ly9cblx0XHQvLyBJbml0aWFsaXplIGFuZCByZXR1cm4gdGhlIFB1YmxpYyBBUElzXG5cdFx0Ly9cblxuXHRcdGluaXQoKTtcblx0XHRyZXR1cm4gcHVibGljQVBJcztcblxuXHR9O1xuXG5cblx0Ly9cblx0Ly8gUmV0dXJuIHRoZSBDb25zdHJ1Y3RvclxuXHQvL1xuXG5cdHJldHVybiBDb25zdHJ1Y3RvcjtcblxufSkpO1xudmFyIHRhYnMgPSBuZXcgVGFiYnkoJ1tkYXRhLXRhYnNdJyk7XG4iXX0=